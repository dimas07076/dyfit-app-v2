import{c as i,q as S,r as d,j as e,A as T,f as z,M as I,U as B,H as L,B as b,L as _,C as $,a as O,b as K,e as U,D as Q,n as W,l as C}from"./index-BzLV8CNE.js";import{u as R}from"./useQuery-PwrN8lgt.js";import{D as Z,a as G,b as J,c as X,d as Y,e as ee}from"./dialog-Cc9arakq.js";import{T as ae,a as se,b as y,c as f}from"./tabs-Dt_cpVbU.js";import{B as te}from"./badge-mwLuO-R-.js";import{P as le}from"./progress-37Updk6C.js";import{S as re}from"./skeleton-DvEZY-df.js";import{E as ie}from"./ErrorMessage-CKvNOnls.js";import{R as ce,a as oe,b as ne}from"./RotinaFormModal-Ov1nMD2j.js";import{V as de}from"./VideoPlayerModal-DmKj2Fh1.js";import{B as me}from"./bar-chart-Bj7A1Ztz.js";import{C as xe}from"./circle-check-DMXSzY4S.js";import{W as he}from"./weight-DLv2WyAW.js";import{C as pe}from"./calendar-days-Degg0IRE.js";import{S as ue}from"./square-pen-DXG1TAJA.js";/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=i("Cake",[["path",{d:"M20 21v-8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v8",key:"1w3rig"}],["path",{d:"M4 16s.5-1 2-1 2.5 2 4 2 2.5-2 4-2 2.5 2 4 2 2-1 2-1",key:"n2jgmb"}],["path",{d:"M2 21h20",key:"1nyx9w"}],["path",{d:"M7 8v3",key:"1qtyvj"}],["path",{d:"M12 8v3",key:"hwp4zt"}],["path",{d:"M17 8v3",key:"1i6e5u"}],["path",{d:"M7 4h0.01",key:"hsw7lv"}],["path",{d:"M12 4h0.01",key:"1e3d8f"}],["path",{d:"M17 4h0.01",key:"p7cxgy"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=i("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=i("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=i("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=i("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=i("Sigma",[["path",{d:"M18 7V5a1 1 0 0 0-1-1H6.5a.5.5 0 0 0-.4.8l4.5 6a2 2 0 0 1 0 2.4l-4.5 6a.5.5 0 0 0 .4.8H17a1 1 0 0 0 1-1v-2",key:"wuwx1p"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=i("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=i("View",[["path",{d:"M5 12s2.545-5 7-5c4.454 0 7 5 7 5s-2.546 5-7 5c-4.455 0-7-5-7-5z",key:"vptub8"}],["path",{d:"M12 13a1 1 0 1 0 0-2 1 1 0 0 0 0 2z",key:"10lhjs"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2",key:"mrq65r"}],["path",{d:"M21 7V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2",key:"be3xqs"}]]),Ne=({alunoId:a,onVisualizarRotina:c,isVisualizingRotina:l})=>{const{data:n,isLoading:o,isError:m,error:x}=R({queryKey:["alunoRotinas",a],queryFn:()=>C(`/api/aluno/${a}/rotinas`),enabled:!!a});return o?e.jsxs("div",{className:"space-y-3 mt-4",children:[" ",[...Array(3)].map((t,h)=>e.jsx(re,{className:"h-12 w-full"},h))," "]}):m?e.jsx(ie,{title:"Erro ao buscar rotinas",message:x.message}):!n||n.length===0?e.jsxs("div",{className:"text-center text-muted-foreground pt-10",children:[" ",e.jsx(Q,{className:"mx-auto h-12 w-12 text-slate-300 dark:text-slate-700"})," ",e.jsx("p",{className:"mt-2",children:"Nenhuma rotina associada a este aluno."})," ",e.jsxs(b,{variant:"outline",size:"sm",className:"mt-4",children:[" ",e.jsx(ne,{className:"mr-2 h-4 w-4"})," Associar Rotina "]})," "]}):e.jsxs("div",{className:"mt-4 pr-2 h-[250px] overflow-y-auto space-y-2",children:[" ",n.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-md border bg-slate-50 dark:bg-slate-800/50",children:[" ",e.jsxs("div",{className:"flex items-center gap-3",children:[" ",e.jsx(ye,{className:"h-5 w-5 text-primary"})," ",e.jsxs("div",{children:[" ",e.jsx("p",{className:"font-semibold text-sm",children:t.titulo})," ",e.jsxs("p",{className:"text-xs text-muted-foreground",children:[" Atualizada em: ",new Date(t.atualizadoEm).toLocaleDateString("pt-BR")," "]})," "]})," "]})," ",e.jsxs(b,{variant:"ghost",size:"icon",onClick:()=>c(t._id),disabled:l,children:[" ",l?e.jsx(W,{className:"h-4 w-4 animate-spin"}):e.jsx(ke,{className:"h-4 w-4"})," "]})," "]},t._id))," "]})},r=({icon:a,label:c,value:l})=>e.jsxs("div",{className:"flex items-start text-sm py-2 border-b border-slate-100 dark:border-slate-800",children:[" ",e.jsx(a,{className:"h-4 w-4 mr-3 mt-0.5 text-slate-500"})," ",e.jsxs("span",{className:"font-medium text-slate-600 dark:text-slate-400 w-32",children:[c,":"]})," ",e.jsx("span",{className:"text-slate-900 dark:text-slate-100",children:l||e.jsx("span",{className:"italic text-slate-400",children:"Não informado"})})," "]}),v=({title:a,value:c,icon:l})=>e.jsxs($,{className:"bg-slate-50 dark:bg-slate-800/50 border-slate-200 dark:border-slate-700",children:[" ",e.jsxs(O,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[" ",e.jsx(K,{className:"text-xs font-medium uppercase tracking-wider text-slate-500 dark:text-slate-400",children:a})," ",e.jsx(l,{className:"h-4 w-4 text-slate-500"})," "]})," ",e.jsxs(U,{children:[" ",e.jsx("div",{className:"text-2xl font-bold text-slate-900 dark:text-slate-50",children:c})," "]})," "]}),Le=({aluno:a,open:c,onOpenChange:l})=>{const n=S(),[o,m]=d.useState(null),[x,t]=d.useState(!1),[h,p]=d.useState(null),[D,g]=d.useState(!1),[k,N]=d.useState(null),{data:u,isFetching:j}=R({queryKey:["rotinaDetalhes",o],queryFn:()=>C(`/api/treinos/${o}`),enabled:!!o});d.useEffect(()=>{u&&!j&&o&&t(!0)},[u,j,o]);const V=s=>{m(s)},E=s=>{p(s),t(!1),g(!0)},q=s=>{N(s)},F=s=>{n.invalidateQueries({queryKey:["alunoRotinas",a==null?void 0:a._id]}),n.invalidateQueries({queryKey:["rotinaDetalhes",s._id]}),p(null),m(null)};if(!a)return null;const A=s=>(s==null?void 0:s.split(" ").map(H=>H[0]).slice(0,2).join("").toUpperCase())||"?",w=s=>s?new Intl.DateTimeFormat("pt-BR").format(new Date(s)):"N/A",P=3,M=66;return e.jsxs(e.Fragment,{children:[e.jsx(Z,{open:c,onOpenChange:l,children:e.jsx(G,{className:"max-w-3xl p-0",children:e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-1/3 bg-slate-50 dark:bg-slate-900/50 p-6 border-r dark:border-slate-800 hidden md:flex flex-col",children:[e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx(T,{className:"h-24 w-24 mb-4 border-4 border-primary/50",children:e.jsx(z,{className:"text-3xl bg-slate-200 dark:bg-slate-700 text-primary",children:A(a.nome)})}),e.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-50",children:a.nome}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:a.email}),e.jsx(te,{variant:a.status==="active"?"success":"destructive",className:"mt-3",children:a.status==="active"?"Ativo":"Inativo"})]}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsx(r,{icon:I,label:"Email",value:a.email}),e.jsx(r,{icon:fe,label:"Telefone",value:a.phone})]})]}),e.jsxs("div",{className:"w-full md:w-2/3 p-6 flex flex-col",children:[e.jsxs(J,{className:"md:hidden mb-4 text-center",children:[e.jsx(X,{children:a.nome}),e.jsx(Y,{children:a.email})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsx(v,{title:"Frequência",value:`${P}/sem`,icon:me}),e.jsx(v,{title:"PSE Médio",value:7.5.toFixed(1),icon:be}),e.jsx(v,{title:"Progresso",value:`${M}%`,icon:xe})]}),e.jsx(le,{value:M,className:"w-full h-2 mb-6"}),e.jsxs(ae,{defaultValue:"detalhes",className:"w-full flex-grow",children:[e.jsxs(se,{className:"grid w-full grid-cols-3",children:[e.jsx(y,{value:"detalhes",children:"Detalhes"}),e.jsx(y,{value:"rotinas",children:"Rotinas"}),e.jsx(y,{value:"historico",children:"Histórico"})]}),e.jsx(f,{value:"detalhes",className:"mt-4 pr-2 h-[250px] overflow-y-auto",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(r,{icon:ge,label:"Objetivo",value:a.goal}),e.jsx(r,{icon:je,label:"Nascimento",value:w(a.birthDate)}),e.jsx(r,{icon:he,label:"Peso",value:`${a.weight} kg`}),e.jsx(r,{icon:ve,label:"Altura",value:`${a.height} cm`}),e.jsx(r,{icon:B,label:"Gênero",value:a.gender}),e.jsx(r,{icon:pe,label:"Início",value:w(a.startDate)})]})}),e.jsx(f,{value:"rotinas",children:e.jsx(Ne,{alunoId:a._id,onVisualizarRotina:V,isVisualizingRotina:j})}),e.jsx(f,{value:"historico",className:"mt-4",children:e.jsxs("div",{className:"text-center text-muted-foreground pt-10",children:[e.jsx(L,{className:"mx-auto h-12 w-12 text-slate-300 dark:text-slate-700"}),e.jsx("p",{className:"mt-2",children:"Histórico de treinos em breve."})]})})]}),e.jsx(ee,{className:"mt-auto pt-6",children:e.jsx(b,{variant:"outline",asChild:!0,children:e.jsxs(_,{href:`/alunos/editar/${a._id}`,children:[" ",e.jsx(ue,{className:"mr-2 h-4 w-4"})," Editar Aluno "]})})})]})]})})}),e.jsx(ce,{isOpen:x,onClose:()=>{t(!1),m(null)},rotina:u||null,onEdit:E,onAssign:()=>{},onPlayVideo:q}),k&&e.jsx(de,{videoUrl:k,onClose:()=>N(null)}),e.jsx(oe,{open:D,onClose:()=>{g(!1),p(null)},rotinaParaEditar:h,onSuccess:F,alunos:[a]})]})};export{Le as A,Be as E};
