import{r as I,j as e,P as T,v as E,I as j,B as N,n as M}from"./index-BzLV8CNE.js";import{u as R,t as V,o as k,s as x,e as S,Z as u}from"./types-BCbViMJN.js";import{F as z,a as l,b as a,c as t,d as m,e as h}from"./form-Bay0436k.js";import{T as $}from"./textarea-Bgva5FCm.js";import{S as v,a as b,b as f,c as w,d as i}from"./select-WeAdnBMh.js";var q="Separator",y="horizontal",B=["horizontal","vertical"],F=I.forwardRef((d,c)=>{const{decorative:s,orientation:n=y,...o}=d,p=H(n)?n:y,r=s?{role:"none"}:{"aria-orientation":p==="vertical"?p:void 0,role:"separator"};return e.jsx(T.div,{"data-orientation":p,...r,...o,ref:c})});F.displayName=q;function H(d){return B.includes(d)}var O=F;const P=I.forwardRef(({className:d,orientation:c="horizontal",decorative:s=!0,...n},o)=>e.jsx(O,{ref:o,decorative:s,orientation:c,className:E("shrink-0 bg-border",c==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",d),...n}));P.displayName=O.displayName;const Z=d=>x().min(1,`${d} é obrigatório.`).refine(c=>!isNaN(parseFloat(c.replace(",","."))),{message:"Deve ser um número."}),G=d=>x().min(1,`${d} é obrigatório.`).refine(c=>/^\d+$/.test(c),{message:"Deve ser um número inteiro."}),L=d=>k({nome:x().min(3,"Nome completo é obrigatório."),email:x().email("E-mail inválido."),phone:x().optional(),birthDate:x().min(1,"Data de nascimento é obrigatória."),gender:S(["masculino","feminino","outro"]),goal:x().min(1,"Objetivo é obrigatório."),weight:Z("Peso"),height:G("Altura"),startDate:x().min(1,"Data de início é obrigatória."),status:S(["active","inactive"]),notes:x().optional(),password:x().optional(),confirmPassword:x().optional()}).superRefine((c,s)=>{const n=c.password||"",o=c.confirmPassword||"";d?n.length>0?(n.length<6&&s.addIssue({code:u.custom,message:"A nova senha deve ter no mínimo 6 caracteres.",path:["password"]}),n!==o&&s.addIssue({code:u.custom,message:"As senhas não coincidem.",path:["confirmPassword"]})):o.length>0&&s.addIssue({code:u.custom,message:"Digite a nova senha primeiro.",path:["password"]}):(n.length<6&&s.addIssue({code:u.custom,message:"A senha deve ter no mínimo 6 caracteres.",path:["password"]}),n!==o&&s.addIssue({code:u.custom,message:"As senhas não coincidem.",path:["confirmPassword"]}))});function X({onSubmit:d,isLoading:c=!1,initialData:s,isEditing:n=!1}){const o=R({resolver:V(L(n)),defaultValues:{nome:(s==null?void 0:s.nome)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",birthDate:s!=null&&s.birthDate?s.birthDate.split("T")[0]:"",gender:(s==null?void 0:s.gender)||void 0,goal:(s==null?void 0:s.goal)||"",weight:s!=null&&s.weight?String(s.weight):"",height:s!=null&&s.height?String(s.height):"",startDate:s!=null&&s.startDate?s.startDate.split("T")[0]:"",status:(s==null?void 0:s.status)||"active",notes:(s==null?void 0:s.notes)||"",password:"",confirmPassword:""}});function p(r){const{confirmPassword:U,...A}=r,C={...A,weight:parseFloat(r.weight.replace(",",".")),height:parseInt(r.height,10),password:r.password&&r.password.trim()!==""?r.password:void 0};d(C)}const g=o.watch("password");return e.jsx(z,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(p),className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Dados Pessoais"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[e.jsx(l,{control:o.control,name:"nome",render:({field:r})=>e.jsxs(a,{children:[e.jsx(t,{children:"Nome completo*"}),e.jsx(m,{children:e.jsx(j,{placeholder:"Digite o nome completo",...r})}),e.jsx(h,{})]})}),e.jsx(l,{control:o.control,name:"email",render:({field:r})=>e.jsxs(a,{children:[e.jsx(t,{children:"Email*"}),e.jsx(m,{children:e.jsx(j,{type:"email",placeholder:"exemplo@email.com",...r})}),e.jsx(h,{})]})}),e.jsx(l,{control:o.control,name:"phone",render:({field:r})=>e.jsxs(a,{children:[e.jsx(t,{children:"Telefone"}),e.jsx(m,{children:e.jsx(j,{placeholder:"(00) 00000-0000",...r,value:r.value??""})}),e.jsx(h,{})]})}),e.jsx(l,{control:o.control,name:"birthDate",render:({field:r})=>e.jsxs(a,{children:[e.jsx(t,{children:"Data de nascimento*"}),e.jsx(m,{children:e.jsx(j,{type:"date",...r})}),e.jsx(h,{})]})}),e.jsx(l,{control:o.control,name:"gender",render:({field:r})=>e.jsxs(a,{children:[e.jsx(t,{children:"Gênero*"}),e.jsxs(v,{onValueChange:r.onChange,value:r.value,children:[e.jsx(m,{children:e.jsx(b,{children:e.jsx(f,{placeholder:"Selecione o gênero"})})}),e.jsxs(w,{children:[e.jsx(i,{value:"masculino",children:"Masculino"}),e.jsx(i,{value:"feminino",children:"Feminino"}),e.jsx(i,{value:"outro",children:"Outro"})]})]}),e.jsx(h,{})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Medidas Corporais"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[e.jsx(l,{control:o.control,name:"weight",render:({field:r})=>e.jsxs(a,{children:[e.jsx(t,{children:"Peso (kg)*"}),e.jsx(m,{children:e.jsx(j,{type:"text",inputMode:"decimal",placeholder:"Ex: 75,5",...r,value:r.value??""})}),e.jsx(h,{})]})}),e.jsx(l,{control:o.control,name:"height",render:({field:r})=>e.jsxs(a,{children:[e.jsx(t,{children:"Altura (cm)*"}),e.jsx(m,{children:e.jsx(j,{type:"text",inputMode:"numeric",placeholder:"Ex: 178",...r,value:r.value??""})}),e.jsx(h,{})]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Credenciais de Acesso"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4",children:[e.jsx(l,{control:o.control,name:"password",render:({field:r})=>e.jsxs(a,{children:[e.jsx(t,{children:n?"Nova Senha (Opcional)":"Senha*"}),e.jsx(m,{children:e.jsx(j,{type:"password",placeholder:n?"Deixe em branco para não alterar":"Mínimo 6 caracteres",...r})}),e.jsx(h,{})]})}),g&&g.trim()!==""||!n?e.jsx(l,{control:o.control,name:"confirmPassword",render:({field:r})=>e.jsxs(a,{children:[e.jsx(t,{children:"Confirmar Senha*"}),e.jsx(m,{children:e.jsx(j,{type:"password",placeholder:"Repita a senha",...r})}),e.jsx(h,{})]})}):null]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold border-b pb-2",children:"Metas e Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{control:o.control,name:"goal",render:({field:r})=>e.jsxs(a,{children:[e.jsx(t,{children:"Objetivo*"}),e.jsxs(v,{onValueChange:r.onChange,value:r.value,children:[e.jsx(m,{children:e.jsx(b,{children:e.jsx(f,{placeholder:"Selecione o objetivo"})})}),e.jsxs(w,{children:[e.jsx(i,{value:"Hipertrofia",children:"Hipertrofia"}),e.jsx(i,{value:"Emagrecimento",children:"Emagrecimento"}),e.jsx(i,{value:"Outros",children:"Outros"})]})]}),e.jsx(h,{})]})}),e.jsx(l,{control:o.control,name:"startDate",render:({field:r})=>e.jsxs(a,{children:[e.jsx(t,{children:"Data de início*"}),e.jsx(m,{children:e.jsx(j,{type:"date",...r})}),e.jsx(h,{})]})}),e.jsx(l,{control:o.control,name:"status",render:({field:r})=>e.jsxs(a,{children:[e.jsx(t,{children:"Status*"}),e.jsxs(v,{onValueChange:r.onChange,value:r.value,children:[e.jsx(m,{children:e.jsx(b,{children:e.jsx(f,{placeholder:"Selecione o status"})})}),e.jsxs(w,{children:[e.jsx(i,{value:"active",children:"Ativo"}),e.jsx(i,{value:"inactive",children:"Inativo"})]})]}),e.jsx(h,{})]})}),e.jsx(l,{control:o.control,name:"notes",render:({field:r})=>e.jsxs(a,{children:[e.jsx(t,{children:"Observações"}),e.jsx(m,{children:e.jsx($,{placeholder:"Observações adicionais...",...r,value:r.value??"",rows:4})}),e.jsx(h,{})]})})]})]}),e.jsx(P,{className:"my-8"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(N,{variant:"outline",type:"button",onClick:()=>window.history.back(),disabled:c,children:"Cancelar"}),e.jsxs(N,{type:"submit",disabled:c,children:[c&&e.jsx(M,{className:"mr-2 h-4 w-4 animate-spin"}),n?"Salvar Alterações":"Adicionar Aluno"]})]})]})})}export{X as S};
