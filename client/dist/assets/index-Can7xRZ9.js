import{c as Ae,o as $e,q as Me,r as C,j as e,B as G,I as Ee,m as Ye,n as wt,T as lr,w as cr,R as l,x as ur,y as dr,z as fr,E as mr,F as hr,O as pr,v as he,u as gr,C as xt,a as vr,b as wr,d as xr,e as yt,l as it,G as yr,J as st,K as lt,U as br,N as ct}from"./index-BzLV8CNE.js";import{P as jr,F as Er,T as Sr,a as Tr,b as Ne}from"./tabs-Dt_cpVbU.js";import{S as Cr}from"./skeleton-DvEZY-df.js";import{D as bt,f as jt,a as Et,b as St,c as Tt,d as Ct,e as Dt}from"./dialog-Cc9arakq.js";import{T as Nt}from"./textarea-Bgva5FCm.js";import{L as Z}from"./label-ErXilaHi.js";import{S as ue,a as de,b as fe,c as me,d as J}from"./select-WeAdnBMh.js";import{u as Xe}from"./useMutation-CMAM4n7S.js";import{P as Dr}from"./pencil-DF3fT-z6.js";import{A as Nr,a as Rr,b as Or,c as Ar,d as $r,e as Mr,f as kr,g as Pr,h as Fr}from"./alert-dialog-Cli0ldNh.js";import{u as Ir}from"./useQuery-PwrN8lgt.js";import{B as ut}from"./badge-mwLuO-R-.js";import{C as Rt}from"./circle-play-CwwuRuoJ.js";import{S as Lr}from"./star-Db543mjc.js";/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=Ae("BrainCircuit",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M9 13a4.5 4.5 0 0 0 3-4",key:"10igwf"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M16 8V5a2 2 0 0 1 2-2",key:"u6izg6"}],["circle",{cx:"16",cy:"13",r:".5",key:"ry7gng"}],["circle",{cx:"18",cy:"3",r:".5",key:"1aiba7"}],["circle",{cx:"20",cy:"21",r:".5",key:"yhc1fs"}],["circle",{cx:"20",cy:"8",r:".5",key:"1e43v0"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=Ae("SearchX",[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=Ae("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=Ae("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function dt({onCreated:t,creationType:n,triggerButtonText:r="Criar Exercício"}){console.log(`%c[ExerciseFormModal] Renderizou com creationType: ${n}`,"color: green;");const{toast:i}=$e(),a=Me(),[o,c]=C.useState(!1),[u,f]=C.useState(""),[S,x]=C.useState(""),[m,h]=C.useState(""),[$,M]=C.useState(""),[j,b]=C.useState(""),[d,O]=C.useState(""),k=s=>{if(s)return s.includes("youtube.com/watch?v=")?`https://www.youtube.com/embed/${s.split("v=")[1].split("&")[0]}`:s.includes("youtu.be/")?`https://www.youtube.com/embed/${s.split("youtu.be/")[1].split("?")[0]}`:s},v=Xe({mutationFn:s=>Ye("POST","/api/exercicios",s),onSuccess:()=>{c(!1),f(""),x(""),h(""),M(""),b(""),O(""),t(),i({title:"Exercício criado com sucesso!"}),a.invalidateQueries({queryKey:["exercicios"]})},onError:s=>{i({title:"Erro ao criar exercício",description:s.message||"Não foi possível salvar o exercício.",variant:"destructive"})}}),P=()=>{if(!u.trim()){i({title:"Erro de Validação",description:"O nome do exercício é obrigatório.",variant:"destructive"});return}const s=k(d),E={nome:u.trim(),isCustom:n==="personal",...S.trim()&&{descricao:S.trim()},...m&&{grupoMuscular:m},...$&&{tipo:$},...j&&{categoria:j},...s&&{urlVideo:s}};console.log("%c[ExerciseFormModal] Enviando payload para API:","color: orange; font-weight: bold;",E),v.mutate(E)},w=v.isPending;return e.jsxs(bt,{open:o,onOpenChange:c,children:[e.jsx(jt,{asChild:!0,children:e.jsxs(G,{children:[e.jsx(jr,{className:"w-4 h-4 mr-2"}),r]})}),e.jsxs(Et,{className:"max-w-lg overflow-y-auto max-h-[80vh]",children:[e.jsxs(St,{children:[e.jsx(Tt,{children:"Novo Exercício"}),e.jsx(Ct,{children:"Preencha os campos abaixo para adicionar um novo exercício."})]}),e.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Nome*"}),e.jsx(Ee,{placeholder:"Nome do exercício",value:u,onChange:s=>f(s.target.value),disabled:w})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Grupo Muscular"}),e.jsxs(ue,{onValueChange:h,value:m,disabled:w,children:[e.jsx(de,{children:e.jsx(fe,{placeholder:"Selecione o grupo muscular"})}),e.jsx(me,{children:["Peitoral","Pernas","Costas","Ombros","Bíceps","Tríceps","Abdômen","Lombar","Glúteos","Panturrilha","Cardio","Corpo Inteiro","Outro"].sort().map(s=>e.jsx(J,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Categoria"}),e.jsxs(ue,{onValueChange:b,value:j,disabled:w,children:[e.jsx(de,{children:e.jsx(fe,{placeholder:"Selecione a categoria"})}),e.jsx(me,{children:["Força","Resistência","Hipertrofia","Potência","Cardiovascular","Flexibilidade","Mobilidade","Funcional","Calistenia","Outro"].sort().map(s=>e.jsx(J,{value:s,children:s},s))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Descrição (opcional)"}),e.jsx(Nt,{placeholder:"Descrição detalhada do exercício",value:S,onChange:s=>x(s.target.value),disabled:w})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"URL do Vídeo (opcional)"}),e.jsx(Ee,{placeholder:"https://youtube.com/...",value:d,onChange:s=>O(s.target.value),disabled:w})]})]}),e.jsxs(Dt,{className:"mt-4",children:[e.jsx(G,{variant:"outline",onClick:()=>c(!1),disabled:w,children:"Cancelar"}),e.jsx(G,{onClick:P,disabled:w||!u.trim(),children:w?"Salvando...":"Salvar Exercício"})]})]})]})}const ae="none";function Ur({exercicio:t,onUpdated:n,gruposMusculares:r,categoriasExercicio:i}){const{toast:a}=$e(),o=Me(),[c,u]=C.useState(!1),[f,S]=C.useState(t.nome),[x,m]=C.useState(t.descricao||""),[h,$]=C.useState(t.categoria||ae),[M,j]=C.useState(t.grupoMuscular||ae),[b,d]=C.useState(t.urlVideo||"");C.useEffect(()=>{t&&c&&(S(t.nome),m(t.descricao||""),$(t.categoria||ae),j(t.grupoMuscular||ae),d(t.urlVideo||""))},[t,c]);const O=w=>{if(w)return w.includes("youtube.com/watch?v=")?`https://www.youtube.com/embed/${w.split("v=")[1].split("&")[0]}`:w.includes("youtu.be/")?`https://www.youtube.com/embed/${w.split("youtu.be/")[1].split("?")[0]}`:w},k=Xe({mutationFn:w=>Ye("PUT",`/api/exercicios/${t._id}`,w),onSuccess:w=>{a({title:"Sucesso!",description:`Exercício "${w.nome}" atualizado.`}),n(),o.invalidateQueries({queryKey:["exercicios"]}),u(!1)},onError:w=>{a({variant:"destructive",title:"Erro ao Atualizar",description:w.message||"Não foi possível salvar as alterações."})}}),v=()=>{if(!f.trim()){a({title:"Erro de Validação",description:"O nome é obrigatório.",variant:"destructive"});return}const w=O(b),s={nome:f.trim(),descricao:x.trim()||void 0,categoria:h===ae?void 0:h,grupoMuscular:M===ae?void 0:M,tipo:void 0,urlVideo:w||void 0};k.mutate(s)},P=k.isPending;return e.jsxs(bt,{open:c,onOpenChange:u,children:[e.jsx(jt,{asChild:!0,children:e.jsx(G,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500 hover:text-blue-600",title:"Editar Exercício",children:e.jsx(Dr,{className:"w-4 h-4"})})}),e.jsxs(Et,{className:"max-w-lg overflow-y-auto max-h-[80vh]",children:[e.jsxs(St,{children:[e.jsx(Tt,{children:"Editar Exercício"}),e.jsx(Ct,{children:"Atualize os dados do exercício abaixo."})]}),e.jsxs("div",{className:"flex flex-col gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:`edit-nome-${t._id}`,children:"Nome*"}),e.jsx(Ee,{id:`edit-nome-${t._id}`,value:f,onChange:w=>S(w.target.value),disabled:P,required:!0})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:`edit-grupo-${t._id}`,children:"Grupo Muscular"}),e.jsxs(ue,{value:M,onValueChange:j,disabled:P,children:[e.jsx(de,{id:`edit-grupo-${t._id}`,children:e.jsx(fe,{placeholder:"Selecione..."})}),e.jsxs(me,{children:[e.jsx(J,{value:ae,children:"Nenhum"}),r.map(w=>e.jsx(J,{value:w,children:w},w))]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:`edit-categoria-${t._id}`,children:"Categoria"}),e.jsxs(ue,{value:h,onValueChange:$,disabled:P,children:[e.jsx(de,{id:`edit-categoria-${t._id}`,children:e.jsx(fe,{placeholder:"Selecione..."})}),e.jsxs(me,{children:[e.jsx(J,{value:ae,children:"Nenhuma"}),i.map(w=>e.jsx(J,{value:w,children:w},w))]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:`edit-descricao-${t._id}`,children:"Descrição"}),e.jsx(Nt,{id:`edit-descricao-${t._id}`,value:x,onChange:w=>m(w.target.value),disabled:P})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:`edit-urlVideo-${t._id}`,children:"URL do Vídeo"}),e.jsx(Ee,{id:`edit-urlVideo-${t._id}`,value:b,onChange:w=>d(w.target.value),disabled:P})]})]}),e.jsxs(Dt,{className:"mt-4 flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>u(!1),disabled:P,children:"Cancelar"}),e.jsxs(G,{onClick:v,disabled:P||!f.trim(),children:[P&&e.jsx(wt,{className:"mr-2 h-4 w-4 animate-spin"}),P?"Salvando...":"Salvar Alterações"]})]})]})]})}function zr({exercicioId:t,onDeleted:n}){const{toast:r}=$e(),i=Me(),[a,o]=C.useState(!1),c=Xe({mutationFn:f=>Ye("DELETE",`/api/exercicios/${f}`),onSuccess:f=>{r({title:"Sucesso!",description:f.message||"Exercício excluído."}),n(),i.invalidateQueries({queryKey:["/api/exercicios/meus"]}),o(!1)},onError:f=>{r({variant:"destructive",title:"Erro ao Excluir",description:f.message||"Não foi possível excluir o exercício."})}}),u=()=>{c.mutate(t)};return e.jsxs(Nr,{open:a,onOpenChange:o,children:[e.jsx(Rr,{asChild:!0,children:e.jsx(G,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive hover:bg-destructive/10 h-8 w-8",title:"Excluir Exercício",children:e.jsx(Hr,{className:"w-4 h-4"})})}),e.jsxs(Or,{children:[e.jsxs(Ar,{children:[e.jsx($r,{children:"Excluir Exercício"}),e.jsx(Mr,{children:"Tem certeza que deseja excluir este exercício? Os treinos que o utilizam podem ser afetados. Esta ação não poderá ser desfeita."})]}),e.jsxs(kr,{children:[e.jsx(Pr,{disabled:c.isPending,children:"Cancelar"}),e.jsx(Fr,{onClick:u,disabled:c.isPending,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:c.isPending?e.jsxs(e.Fragment,{children:[e.jsx(wt,{className:"mr-2 h-4 w-4 animate-spin"})," Excluindo..."]}):"Excluir"})]})]})]})}const qr=({id:t,title:n})=>{const[r,i]=C.useState(!1),a=C.useRef(null);C.useEffect(()=>{if(!a.current)return;const u=new IntersectionObserver(([f])=>{f.isIntersecting&&(i(!0),u.disconnect())},{rootMargin:"200px"});return u.observe(a.current),()=>u.disconnect()},[]);const o=(()=>{try{return t.includes("youtube.com/embed/")?t.split("/embed/")[1].split("?")[0]:t}catch{return t}})(),c=`https://i.ytimg.com/vi/${o}/hqdefault.jpg`;return e.jsx("div",{ref:a,className:"w-full h-full bg-black",children:r?e.jsx("iframe",{className:"w-full h-full",title:n,src:`https://www.youtube.com/embed/${o}?autoplay=1`,allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0}):e.jsxs("div",{className:"w-full h-full relative group cursor-pointer",children:[e.jsx("img",{src:c,alt:`Thumbnail para o vídeo: ${n}`,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 group-hover:bg-opacity-40 transition-all duration-300 flex items-center justify-center",children:e.jsx(Rt,{className:"w-12 h-12 text-white opacity-80 drop-shadow-lg"})})]})})},Wr=({id:t,title:n})=>{const[r,i]=C.useState(!1),a=C.useRef(null);C.useEffect(()=>{if(!a.current)return;const c=new IntersectionObserver(([u])=>{u.isIntersecting&&(i(!0),c.disconnect())},{rootMargin:"200px"});return c.observe(a.current),()=>c.disconnect()},[]);const o=`https://drive.google.com/file/d/${t}/preview`;return e.jsx("div",{ref:a,className:"w-full h-full bg-slate-800",children:r?e.jsx("iframe",{className:"w-full h-full",title:n,src:o,allow:"autoplay",allowFullScreen:!0}):e.jsxs("div",{className:"w-full h-full relative group flex items-center justify-center cursor-pointer",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20 group-hover:bg-opacity-40 transition-all duration-300"}),e.jsx(Rt,{className:"w-12 h-12 text-white opacity-0 group-hover:opacity-80 transition-opacity duration-300 drop-shadow-lg z-10"})]})})};function Yr(t){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}const Ot=l.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Se=()=>{const t=l.useContext(Ot);if(!t)throw new Error("useDrawerContext must be used within a Drawer.Root");return t};Yr(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function Xr(){const t=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(t)&&/Mobile/.test(t)||/FxiOS/.test(t))}function Gr(){return Ge(/^Mac/)}function Kr(){return Ge(/^iPhone/)}function ft(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Qr(){return Ge(/^iPad/)||Gr()&&navigator.maxTouchPoints>1}function At(){return Kr()||Qr()}function Ge(t){return typeof window<"u"&&window.navigator!=null?t.test(window.navigator.platform):void 0}const Zr=24,Jr=typeof window<"u"?C.useLayoutEffect:C.useEffect;function mt(...t){return(...n)=>{for(let r of t)typeof r=="function"&&r(...n)}}const _e=typeof document<"u"&&window.visualViewport;function ht(t){let n=window.getComputedStyle(t);return/(auto|scroll)/.test(n.overflow+n.overflowX+n.overflowY)}function $t(t){for(ht(t)&&(t=t.parentElement);t&&!ht(t);)t=t.parentElement;return t||document.scrollingElement||document.documentElement}const en=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let Re=0,Ve;function tn(t={}){let{isDisabled:n}=t;Jr(()=>{if(!n)return Re++,Re===1&&At()&&(Ve=rn()),()=>{Re--,Re===0&&(Ve==null||Ve())}},[n])}function rn(){let t,n=0,r=m=>{t=$t(m.target),!(t===document.documentElement&&t===document.body)&&(n=m.changedTouches[0].pageY)},i=m=>{if(!t||t===document.documentElement||t===document.body){m.preventDefault();return}let h=m.changedTouches[0].pageY,$=t.scrollTop,M=t.scrollHeight-t.clientHeight;M!==0&&(($<=0&&h>n||$>=M&&h<n)&&m.preventDefault(),n=h)},a=m=>{let h=m.target;Ue(h)&&h!==document.activeElement&&(m.preventDefault(),h.style.transform="translateY(-2000px)",h.focus(),requestAnimationFrame(()=>{h.style.transform=""}))},o=m=>{let h=m.target;Ue(h)&&(h.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{h.style.transform="",_e&&(_e.height<window.innerHeight?requestAnimationFrame(()=>{pt(h)}):_e.addEventListener("resize",()=>pt(h),{once:!0}))}))},c=()=>{window.scrollTo(0,0)},u=window.pageXOffset,f=window.pageYOffset,S=mt(nn(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let x=mt(ye(document,"touchstart",r,{passive:!1,capture:!0}),ye(document,"touchmove",i,{passive:!1,capture:!0}),ye(document,"touchend",a,{passive:!1,capture:!0}),ye(document,"focus",o,!0),ye(window,"scroll",c));return()=>{S(),x(),window.scrollTo(u,f)}}function nn(t,n,r){let i=t.style[n];return t.style[n]=r,()=>{t.style[n]=i}}function ye(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}function pt(t){let n=document.scrollingElement||document.documentElement;for(;t&&t!==n;){let r=$t(t);if(r!==document.documentElement&&r!==document.body&&r!==t){let i=r.getBoundingClientRect().top,a=t.getBoundingClientRect().top,o=t.getBoundingClientRect().bottom;const c=r.getBoundingClientRect().bottom+Zr;o>c&&(r.scrollTop+=a-i)}t=r.parentElement}}function Ue(t){return t instanceof HTMLInputElement&&!en.has(t.type)||t instanceof HTMLTextAreaElement||t instanceof HTMLElement&&t.isContentEditable}function an(t,n){typeof t=="function"?t(n):t!=null&&(t.current=n)}function on(...t){return n=>t.forEach(r=>an(r,n))}function Mt(...t){return C.useCallback(on(...t),t)}const kt=new WeakMap;function L(t,n,r=!1){if(!t||!(t instanceof HTMLElement))return;let i={};Object.entries(n).forEach(([a,o])=>{if(a.startsWith("--")){t.style.setProperty(a,o);return}i[a]=t.style[a],t.style[a]=o}),!r&&kt.set(t,i)}function sn(t,n){if(!t||!(t instanceof HTMLElement))return;let r=kt.get(t);r&&(t.style[n]=r[n])}const I=t=>{switch(t){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return t}};function Oe(t,n){if(!t)return null;const r=window.getComputedStyle(t),i=r.transform||r.webkitTransform||r.mozTransform;let a=i.match(/^matrix3d\((.+)\)$/);return a?parseFloat(a[1].split(", ")[I(n)?13:12]):(a=i.match(/^matrix\((.+)\)$/),a?parseFloat(a[1].split(", ")[I(n)?5:4]):null)}function ln(t){return 8*(Math.log(t+1)-2)}function Be(t,n){if(!t)return()=>{};const r=t.style.cssText;return Object.assign(t.style,n),()=>{t.style.cssText=r}}function cn(...t){return(...n)=>{for(const r of t)typeof r=="function"&&r(...n)}}const A={DURATION:.5,EASE:[.32,.72,0,1]},Pt=.4,un=.25,dn=100,Ft=8,ie=16,ze=26,He="vaul-dragging";function It(t){const n=l.useRef(t);return l.useEffect(()=>{n.current=t}),l.useMemo(()=>(...r)=>n.current==null?void 0:n.current.call(n,...r),[])}function fn({defaultProp:t,onChange:n}){const r=l.useState(t),[i]=r,a=l.useRef(i),o=It(n);return l.useEffect(()=>{a.current!==i&&(o(i),a.current=i)},[i,a,o]),r}function Lt({prop:t,defaultProp:n,onChange:r=()=>{}}){const[i,a]=fn({defaultProp:n,onChange:r}),o=t!==void 0,c=o?t:i,u=It(r),f=l.useCallback(S=>{if(o){const m=typeof S=="function"?S(t):S;m!==t&&u(m)}else a(S)},[o,t,a,u]);return[c,f]}function mn({activeSnapPointProp:t,setActiveSnapPointProp:n,snapPoints:r,drawerRef:i,overlayRef:a,fadeFromIndex:o,onSnapPointChange:c,direction:u="bottom",container:f,snapToSequentialPoint:S}){const[x,m]=Lt({prop:t,defaultProp:r==null?void 0:r[0],onChange:n}),[h,$]=l.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);l.useEffect(()=>{function s(){$({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const M=l.useMemo(()=>x===(r==null?void 0:r[r.length-1])||null,[r,x]),j=l.useMemo(()=>{var s;return(s=r==null?void 0:r.findIndex(E=>E===x))!=null?s:null},[r,x]),b=r&&r.length>0&&(o||o===0)&&!Number.isNaN(o)&&r[o]===x||!r,d=l.useMemo(()=>{const s=f?{width:f.getBoundingClientRect().width,height:f.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var E;return(E=r==null?void 0:r.map(D=>{const B=typeof D=="string";let _=0;if(B&&(_=parseInt(D,10)),I(u)){const g=B?_:h?D*s.height:0;return h?u==="bottom"?s.height-g:-s.height+g:g}const W=B?_:h?D*s.width:0;return h?u==="right"?s.width-W:-s.width+W:W}))!=null?E:[]},[r,h,f]),O=l.useMemo(()=>j!==null?d==null?void 0:d[j]:null,[d,j]),k=l.useCallback(s=>{var E;const D=(E=d==null?void 0:d.findIndex(B=>B===s))!=null?E:null;c(D),L(i.current,{transition:`transform ${A.DURATION}s cubic-bezier(${A.EASE.join(",")})`,transform:I(u)?`translate3d(0, ${s}px, 0)`:`translate3d(${s}px, 0, 0)`}),d&&D!==d.length-1&&o!==void 0&&D!==o&&D<o?L(a.current,{transition:`opacity ${A.DURATION}s cubic-bezier(${A.EASE.join(",")})`,opacity:"0"}):L(a.current,{transition:`opacity ${A.DURATION}s cubic-bezier(${A.EASE.join(",")})`,opacity:"1"}),m(r==null?void 0:r[Math.max(D,0)])},[i.current,r,d,o,a,m]);l.useEffect(()=>{if(x||t){var s;const E=(s=r==null?void 0:r.findIndex(D=>D===t||D===x))!=null?s:-1;d&&E!==-1&&typeof d[E]=="number"&&k(d[E])}},[x,t,r,d,k]);function v({draggedDistance:s,closeDrawer:E,velocity:D,dismissible:B}){if(o===void 0)return;const _=u==="bottom"||u==="right"?(O??0)-s:(O??0)+s,W=j===o-1,g=j===0,q=s>0;if(W&&L(a.current,{transition:`opacity ${A.DURATION}s cubic-bezier(${A.EASE.join(",")})`}),!S&&D>2&&!q){B?E():k(d[0]);return}if(!S&&D>2&&q&&d&&r){k(d[r.length-1]);return}const H=d==null?void 0:d.reduce((V,ee)=>typeof V!="number"||typeof ee!="number"?V:Math.abs(ee-_)<Math.abs(V-_)?ee:V),Y=I(u)?window.innerHeight:window.innerWidth;if(D>Pt&&Math.abs(s)<Y*.4){const V=q?1:-1;if(V>0&&M&&r){k(d[r.length-1]);return}if(g&&V<0&&B&&E(),j===null)return;k(d[j+V]);return}k(H)}function P({draggedDistance:s}){if(O===null)return;const E=u==="bottom"||u==="right"?O-s:O+s;(u==="bottom"||u==="right")&&E<d[d.length-1]||(u==="top"||u==="left")&&E>d[d.length-1]||L(i.current,{transform:I(u)?`translate3d(0, ${E}px, 0)`:`translate3d(${E}px, 0, 0)`})}function w(s,E){if(!r||typeof j!="number"||!d||o===void 0)return null;const D=j===o-1;if(j>=o&&E)return 0;if(D&&!E)return 1;if(!b&&!D)return null;const _=D?j+1:j-1,W=D?d[_]-d[_-1]:d[_+1]-d[_],g=s/Math.abs(W);return D?1-g:g}return{isLastSnapPoint:M,activeSnapPoint:x,shouldFade:b,getPercentageDragged:w,setActiveSnapPoint:m,activeSnapPointIndex:j,onRelease:v,onDrag:P,snapPointsOffset:d}}const hn=()=>()=>{};function pn(){const{direction:t,isOpen:n,shouldScaleBackground:r,setBackgroundColorOnScale:i,noBodyStyles:a}=Se(),o=l.useRef(null),c=C.useMemo(()=>document.body.style.backgroundColor,[]);function u(){return(window.innerWidth-ze)/window.innerWidth}l.useEffect(()=>{if(n&&r){o.current&&clearTimeout(o.current);const f=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!f)return;cn(i&&!a?Be(document.body,{background:"black"}):hn,Be(f,{transformOrigin:I(t)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${A.DURATION}s`,transitionTimingFunction:`cubic-bezier(${A.EASE.join(",")})`}));const S=Be(f,{borderRadius:`${Ft}px`,overflow:"hidden",...I(t)?{transform:`scale(${u()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${u()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{S(),o.current=window.setTimeout(()=>{c?document.body.style.background=c:document.body.style.removeProperty("background")},A.DURATION*1e3)}}},[n,r,c])}let be=null;function gn({isOpen:t,modal:n,nested:r,hasBeenOpened:i,preventScrollRestoration:a,noBodyStyles:o}){const[c,u]=l.useState(()=>typeof window<"u"?window.location.href:""),f=l.useRef(0),S=l.useCallback(()=>{if(ft()&&be===null&&t&&!o){be={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:m,innerHeight:h}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-f.current}px`,left:`${-m}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const $=h-window.innerHeight;$&&f.current>=h&&(document.body.style.top=`${-(f.current+$)}px`)}),300)}},[t]),x=l.useCallback(()=>{if(ft()&&be!==null&&!o){const m=-parseInt(document.body.style.top,10),h=-parseInt(document.body.style.left,10);Object.assign(document.body.style,be),window.requestAnimationFrame(()=>{if(a&&c!==window.location.href){u(window.location.href);return}window.scrollTo(h,m)}),be=null}},[c]);return l.useEffect(()=>{function m(){f.current=window.scrollY}return m(),window.addEventListener("scroll",m),()=>{window.removeEventListener("scroll",m)}},[]),l.useEffect(()=>{if(n)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||x()}},[n,x]),l.useEffect(()=>{r||!i||(t?(!window.matchMedia("(display-mode: standalone)").matches&&S(),n||window.setTimeout(()=>{x()},500)):x())},[t,i,c,n,r,S,x]),{restorePositionSetting:x}}function vn({open:t,onOpenChange:n,children:r,onDrag:i,onRelease:a,snapPoints:o,shouldScaleBackground:c=!1,setBackgroundColorOnScale:u=!0,closeThreshold:f=un,scrollLockTimeout:S=dn,dismissible:x=!0,handleOnly:m=!1,fadeFromIndex:h=o&&o.length-1,activeSnapPoint:$,setActiveSnapPoint:M,fixed:j,modal:b=!0,onClose:d,nested:O,noBodyStyles:k=!1,direction:v="bottom",defaultOpen:P=!1,disablePreventScroll:w=!0,snapToSequentialPoint:s=!1,preventScrollRestoration:E=!1,repositionInputs:D=!0,onAnimationEnd:B,container:_,autoFocus:W=!1}){var g,q;const[H=!1,Y]=Lt({defaultProp:P,prop:t,onChange:p=>{n==null||n(p),!p&&!O&&er(),setTimeout(()=>{B==null||B(p)},A.DURATION*1e3),p&&!b&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),p||(document.body.style.pointerEvents="auto")}}),[V,ee]=l.useState(!1),[te,pe]=l.useState(!1),[Xt,Ke]=l.useState(!1),se=l.useRef(null),Te=l.useRef(null),ke=l.useRef(null),Pe=l.useRef(null),ge=l.useRef(null),ve=l.useRef(!1),Fe=l.useRef(null),Ie=l.useRef(0),le=l.useRef(!1),Qe=l.useRef(!P),Ze=l.useRef(0),y=l.useRef(null),Je=l.useRef(((g=y.current)==null?void 0:g.getBoundingClientRect().height)||0),et=l.useRef(((q=y.current)==null?void 0:q.getBoundingClientRect().width)||0),Le=l.useRef(0),Gt=l.useCallback(p=>{o&&p===we.length-1&&(Te.current=new Date)},[]),{activeSnapPoint:Kt,activeSnapPointIndex:ce,setActiveSnapPoint:tt,onRelease:Qt,snapPointsOffset:we,onDrag:Zt,shouldFade:rt,getPercentageDragged:Jt}=mn({snapPoints:o,activeSnapPointProp:$,setActiveSnapPointProp:M,drawerRef:y,fadeFromIndex:h,overlayRef:se,onSnapPointChange:Gt,direction:v,container:_,snapToSequentialPoint:s});tn({isDisabled:!H||te||!b||Xt||!V||!D||!w});const{restorePositionSetting:er}=gn({isOpen:H,modal:b,nested:O??!1,hasBeenOpened:V,preventScrollRestoration:E,noBodyStyles:k});function Ce(){return(window.innerWidth-ze)/window.innerWidth}function tr(p){var N,R;!x&&!o||y.current&&!y.current.contains(p.target)||(Je.current=((N=y.current)==null?void 0:N.getBoundingClientRect().height)||0,et.current=((R=y.current)==null?void 0:R.getBoundingClientRect().width)||0,pe(!0),ke.current=new Date,At()&&window.addEventListener("touchend",()=>ve.current=!1,{once:!0}),p.target.setPointerCapture(p.pointerId),Ie.current=I(v)?p.pageY:p.pageX)}function nt(p,N){var R;let T=p;const F=(R=window.getSelection())==null?void 0:R.toString(),z=y.current?Oe(y.current,v):null,U=new Date;if(T.tagName==="SELECT"||T.hasAttribute("data-vaul-no-drag")||T.closest("[data-vaul-no-drag]"))return!1;if(v==="right"||v==="left")return!0;if(Te.current&&U.getTime()-Te.current.getTime()<500)return!1;if(z!==null&&(v==="bottom"?z>0:z<0))return!0;if(F&&F.length>0)return!1;if(ge.current&&U.getTime()-ge.current.getTime()<S&&z===0||N)return ge.current=U,!1;for(;T;){if(T.scrollHeight>T.clientHeight){if(T.scrollTop!==0)return ge.current=new Date,!1;if(T.getAttribute("role")==="dialog")return!0}T=T.parentNode}return!0}function rr(p){if(y.current&&te){const N=v==="bottom"||v==="right"?1:-1,R=(Ie.current-(I(v)?p.pageY:p.pageX))*N,T=R>0,F=o&&!x&&!T;if(F&&ce===0)return;const z=Math.abs(R),U=document.querySelector("[data-vaul-drawer-wrapper]"),re=v==="bottom"||v==="top"?Je.current:et.current;let X=z/re;const oe=Jt(z,T);if(oe!==null&&(X=oe),F&&X>=1||!ve.current&&!nt(p.target,T))return;if(y.current.classList.add(He),ve.current=!0,L(y.current,{transition:"none"}),L(se.current,{transition:"none"}),o&&Zt({draggedDistance:R}),T&&!o){const Q=ln(R),De=Math.min(Q*-1,0)*N;L(y.current,{transform:I(v)?`translate3d(0, ${De}px, 0)`:`translate3d(${De}px, 0, 0)`});return}const ne=1-X;if((rt||h&&ce===h-1)&&(i==null||i(p,X),L(se.current,{opacity:`${ne}`,transition:"none"},!0)),U&&se.current&&c){const Q=Math.min(Ce()+X*(1-Ce()),1),De=8-X*8,ot=Math.max(0,14-X*14);L(U,{borderRadius:`${De}px`,transform:I(v)?`scale(${Q}) translate3d(0, ${ot}px, 0)`:`scale(${Q}) translate3d(${ot}px, 0, 0)`,transition:"none"},!0)}if(!o){const Q=z*N;L(y.current,{transform:I(v)?`translate3d(0, ${Q}px, 0)`:`translate3d(${Q}px, 0, 0)`})}}}l.useEffect(()=>{window.requestAnimationFrame(()=>{Qe.current=!0})},[]),l.useEffect(()=>{var p;function N(){if(!y.current||!D)return;const R=document.activeElement;if(Ue(R)||le.current){var T;const F=((T=window.visualViewport)==null?void 0:T.height)||0,z=window.innerHeight;let U=z-F;const re=y.current.getBoundingClientRect().height||0,X=re>z*.8;Le.current||(Le.current=re);const oe=y.current.getBoundingClientRect().top;if(Math.abs(Ze.current-U)>60&&(le.current=!le.current),o&&o.length>0&&we&&ce){const ne=we[ce]||0;U+=ne}if(Ze.current=U,re>F||le.current){const ne=y.current.getBoundingClientRect().height;let Q=ne;ne>F&&(Q=F-(X?oe:ze)),j?y.current.style.height=`${ne-Math.max(U,0)}px`:y.current.style.height=`${Math.max(Q,F-oe)}px`}else Xr()||(y.current.style.height=`${Le.current}px`);o&&o.length>0&&!le.current?y.current.style.bottom="0px":y.current.style.bottom=`${Math.max(U,0)}px`}}return(p=window.visualViewport)==null||p.addEventListener("resize",N),()=>{var R;return(R=window.visualViewport)==null?void 0:R.removeEventListener("resize",N)}},[ce,o,we]);function xe(p){nr(),d==null||d(),p||Y(!1),setTimeout(()=>{o&&tt(o[0])},A.DURATION*1e3)}function at(){if(!y.current)return;const p=document.querySelector("[data-vaul-drawer-wrapper]"),N=Oe(y.current,v);L(y.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${A.DURATION}s cubic-bezier(${A.EASE.join(",")})`}),L(se.current,{transition:`opacity ${A.DURATION}s cubic-bezier(${A.EASE.join(",")})`,opacity:"1"}),c&&N&&N>0&&H&&L(p,{borderRadius:`${Ft}px`,overflow:"hidden",...I(v)?{transform:`scale(${Ce()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${Ce()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${A.DURATION}s`,transitionTimingFunction:`cubic-bezier(${A.EASE.join(",")})`},!0)}function nr(){!te||!y.current||(y.current.classList.remove(He),ve.current=!1,pe(!1),Pe.current=new Date)}function ar(p){if(!te||!y.current)return;y.current.classList.remove(He),ve.current=!1,pe(!1),Pe.current=new Date;const N=Oe(y.current,v);if(!p||!nt(p.target,!1)||!N||Number.isNaN(N)||ke.current===null)return;const R=Pe.current.getTime()-ke.current.getTime(),T=Ie.current-(I(v)?p.pageY:p.pageX),F=Math.abs(T)/R;if(F>.05&&(Ke(!0),setTimeout(()=>{Ke(!1)},200)),o){Qt({draggedDistance:T*(v==="bottom"||v==="right"?1:-1),closeDrawer:xe,velocity:F,dismissible:x}),a==null||a(p,!0);return}if(v==="bottom"||v==="right"?T>0:T<0){at(),a==null||a(p,!0);return}if(F>Pt){xe(),a==null||a(p,!1);return}var z;const U=Math.min((z=y.current.getBoundingClientRect().height)!=null?z:0,window.innerHeight);var re;const X=Math.min((re=y.current.getBoundingClientRect().width)!=null?re:0,window.innerWidth),oe=v==="left"||v==="right";if(Math.abs(N)>=(oe?X:U)*f){xe(),a==null||a(p,!1);return}a==null||a(p,!0),at()}l.useEffect(()=>(H&&(L(document.documentElement,{scrollBehavior:"auto"}),Te.current=new Date),()=>{sn(document.documentElement,"scrollBehavior")}),[H]);function or(p){const N=p?(window.innerWidth-ie)/window.innerWidth:1,R=p?-ie:0;Fe.current&&window.clearTimeout(Fe.current),L(y.current,{transition:`transform ${A.DURATION}s cubic-bezier(${A.EASE.join(",")})`,transform:I(v)?`scale(${N}) translate3d(0, ${R}px, 0)`:`scale(${N}) translate3d(${R}px, 0, 0)`}),!p&&y.current&&(Fe.current=setTimeout(()=>{const T=Oe(y.current,v);L(y.current,{transition:"none",transform:I(v)?`translate3d(0, ${T}px, 0)`:`translate3d(${T}px, 0, 0)`})},500))}function ir(p,N){if(N<0)return;const R=(window.innerWidth-ie)/window.innerWidth,T=R+N*(1-R),F=-ie+N*ie;L(y.current,{transform:I(v)?`scale(${T}) translate3d(0, ${F}px, 0)`:`scale(${T}) translate3d(${F}px, 0, 0)`,transition:"none"})}function sr(p,N){const R=I(v)?window.innerHeight:window.innerWidth,T=N?(R-ie)/R:1,F=N?-ie:0;N&&L(y.current,{transition:`transform ${A.DURATION}s cubic-bezier(${A.EASE.join(",")})`,transform:I(v)?`scale(${T}) translate3d(0, ${F}px, 0)`:`scale(${T}) translate3d(${F}px, 0, 0)`})}return l.useEffect(()=>{b||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[b]),l.createElement(fr,{defaultOpen:P,onOpenChange:p=>{!x&&!p||(p?ee(!0):xe(!0),Y(p))},open:H},l.createElement(Ot.Provider,{value:{activeSnapPoint:Kt,snapPoints:o,setActiveSnapPoint:tt,drawerRef:y,overlayRef:se,onOpenChange:n,onPress:tr,onRelease:ar,onDrag:rr,dismissible:x,shouldAnimate:Qe,handleOnly:m,isOpen:H,isDragging:te,shouldFade:rt,closeDrawer:xe,onNestedDrag:ir,onNestedOpenChange:or,onNestedRelease:sr,keyboardIsOpen:le,modal:b,snapPointsOffset:we,activeSnapPointIndex:ce,direction:v,shouldScaleBackground:c,setBackgroundColorOnScale:u,noBodyStyles:k,container:_,autoFocus:W}},r))}const _t=l.forwardRef(function({...t},n){const{overlayRef:r,snapPoints:i,onRelease:a,shouldFade:o,isOpen:c,modal:u,shouldAnimate:f}=Se(),S=Mt(n,r),x=i&&i.length>0;if(!u)return null;const m=l.useCallback(h=>a(h),[a]);return l.createElement(pr,{onMouseUp:m,ref:S,"data-vaul-overlay":"","data-vaul-snap-points":c&&x?"true":"false","data-vaul-snap-points-overlay":c&&o?"true":"false","data-vaul-animate":f!=null&&f.current?"true":"false",...t})});_t.displayName="Drawer.Overlay";const Vt=l.forwardRef(function({onPointerDownOutside:t,style:n,onOpenAutoFocus:r,...i},a){const{drawerRef:o,onPress:c,onRelease:u,onDrag:f,keyboardIsOpen:S,snapPointsOffset:x,activeSnapPointIndex:m,modal:h,isOpen:$,direction:M,snapPoints:j,container:b,handleOnly:d,shouldAnimate:O,autoFocus:k}=Se(),[v,P]=l.useState(!1),w=Mt(a,o),s=l.useRef(null),E=l.useRef(null),D=l.useRef(!1),B=j&&j.length>0;pn();const _=(g,q,H=0)=>{if(D.current)return!0;const Y=Math.abs(g.y),V=Math.abs(g.x),ee=V>Y,te=["bottom","right"].includes(q)?1:-1;if(q==="left"||q==="right"){if(!(g.x*te<0)&&V>=0&&V<=H)return ee}else if(!(g.y*te<0)&&Y>=0&&Y<=H)return!ee;return D.current=!0,!0};l.useEffect(()=>{B&&window.requestAnimationFrame(()=>{P(!0)})},[]);function W(g){s.current=null,D.current=!1,u(g)}return l.createElement(hr,{"data-vaul-drawer-direction":M,"data-vaul-drawer":"","data-vaul-delayed-snap-points":v?"true":"false","data-vaul-snap-points":$&&B?"true":"false","data-vaul-custom-container":b?"true":"false","data-vaul-animate":O!=null&&O.current?"true":"false",...i,ref:w,style:x&&x.length>0?{"--snap-point-height":`${x[m??0]}px`,...n}:n,onPointerDown:g=>{d||(i.onPointerDown==null||i.onPointerDown.call(i,g),s.current={x:g.pageX,y:g.pageY},c(g))},onOpenAutoFocus:g=>{r==null||r(g),k||g.preventDefault()},onPointerDownOutside:g=>{if(t==null||t(g),!h||g.defaultPrevented){g.preventDefault();return}S.current&&(S.current=!1)},onFocusOutside:g=>{if(!h){g.preventDefault();return}},onPointerMove:g=>{if(E.current=g,d||(i.onPointerMove==null||i.onPointerMove.call(i,g),!s.current))return;const q=g.pageY-s.current.y,H=g.pageX-s.current.x,Y=g.pointerType==="touch"?10:2;_({x:H,y:q},M,Y)?f(g):(Math.abs(H)>Y||Math.abs(q)>Y)&&(s.current=null)},onPointerUp:g=>{i.onPointerUp==null||i.onPointerUp.call(i,g),s.current=null,D.current=!1,u(g)},onPointerOut:g=>{i.onPointerOut==null||i.onPointerOut.call(i,g),W(E.current)},onContextMenu:g=>{i.onContextMenu==null||i.onContextMenu.call(i,g),E.current&&W(E.current)}})});Vt.displayName="Drawer.Content";const wn=250,xn=120,yn=l.forwardRef(function({preventCycle:t=!1,children:n,...r},i){const{closeDrawer:a,isDragging:o,snapPoints:c,activeSnapPoint:u,setActiveSnapPoint:f,dismissible:S,handleOnly:x,isOpen:m,onPress:h,onDrag:$}=Se(),M=l.useRef(null),j=l.useRef(!1);function b(){if(j.current){k();return}window.setTimeout(()=>{d()},xn)}function d(){if(o||t||j.current){k();return}if(k(),!c||c.length===0){S||a();return}if(u===c[c.length-1]&&S){a();return}const P=c.findIndex(s=>s===u);if(P===-1)return;const w=c[P+1];f(w)}function O(){M.current=window.setTimeout(()=>{j.current=!0},wn)}function k(){M.current&&window.clearTimeout(M.current),j.current=!1}return l.createElement("div",{onClick:b,onPointerCancel:k,onPointerDown:v=>{x&&h(v),O()},onPointerMove:v=>{x&&$(v)},ref:i,"data-vaul-drawer-visible":m?"true":"false","data-vaul-handle":"","aria-hidden":"true",...r},l.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},n))});yn.displayName="Drawer.Handle";function bn(t){const n=Se(),{container:r=n.container,...i}=t;return l.createElement(mr,{container:r,...i})}const K={Root:vn,Content:Vt,Overlay:_t,Trigger:lr,Portal:bn,Close:cr,Title:ur,Description:dr},Bt=({shouldScaleBackground:t=!0,...n})=>e.jsx(K.Root,{shouldScaleBackground:t,...n});Bt.displayName="Drawer";const jn=K.Trigger,En=K.Portal,Sn=K.Close,Ht=C.forwardRef(({className:t,...n},r)=>e.jsx(K.Overlay,{ref:r,className:he("fixed inset-0 z-50 bg-black/80",t),...n}));Ht.displayName=K.Overlay.displayName;const Ut=C.forwardRef(({className:t,children:n,...r},i)=>e.jsxs(En,{children:[e.jsx(Ht,{}),e.jsxs(K.Content,{ref:i,className:he("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",t),...r,children:[e.jsx("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),n]})]}));Ut.displayName="DrawerContent";const zt=({className:t,...n})=>e.jsx("div",{className:he("grid gap-1.5 p-4 text-center sm:text-left",t),...n});zt.displayName="DrawerHeader";const qt=({className:t,...n})=>e.jsx("div",{className:he("mt-auto flex flex-col gap-2 p-4",t),...n});qt.displayName="DrawerFooter";const Wt=C.forwardRef(({className:t,...n},r)=>e.jsx(K.Title,{ref:r,className:he("text-lg font-semibold leading-none tracking-tight",t),...n}));Wt.displayName=K.Title.displayName;const Yt=C.forwardRef(({className:t,...n},r)=>e.jsx(K.Description,{ref:r,className:he("text-sm text-muted-foreground",t),...n}));Yt.displayName=K.Description.displayName;const gt="all",vt=({grupos:t,categorias:n,filters:r,onFilterChange:i,onClearFilters:a})=>e.jsxs("div",{className:"space-y-4",children:[e.jsx(Ee,{placeholder:"Buscar por nome...",value:r.searchTerm,onChange:o=>i({searchTerm:o.target.value}),className:"w-full bg-background dark:bg-input"}),e.jsxs(ue,{onValueChange:o=>i({grupo:o}),value:r.grupo,children:[e.jsx(de,{className:"w-full bg-background dark:bg-input",children:e.jsx(fe,{placeholder:"Grupo muscular"})}),e.jsxs(me,{children:[e.jsx(J,{value:gt,children:"Todos os Grupos"}),t.map(o=>e.jsx(J,{value:o,children:o},o))]})]}),e.jsxs(ue,{onValueChange:o=>i({categoria:o}),value:r.categoria,children:[e.jsx(de,{className:"w-full bg-background dark:bg-input",children:e.jsx(fe,{placeholder:"Tipo/Categoria"})}),e.jsxs(me,{children:[e.jsx(J,{value:gt,children:"Todos os Tipos"}),n.map(o=>e.jsx(J,{value:o,children:o},o))]})]}),e.jsxs(G,{variant:"ghost",onClick:a,className:"w-full justify-center text-muted-foreground hover:text-foreground",children:[e.jsx(Er,{className:"w-4 h-4 mr-2"}),"Limpar Filtros"]})]}),je="all",Tn=t=>{if(!t)return;const n=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,r=t.match(n);return r&&r[2].length===11?r[2]:void 0},Cn=t=>{if(!t)return;const n=[/drive\.google\.com\/file\/d\/([a-zA-Z0-9_-]+)/,/drive\.google\.com\/open\?id=([a-zA-Z0-9_-]+)/];for(const r of n){const i=t.match(r);if(i&&i[1])return i[1]}},qe=["Peitoral","Pernas","Costas","Ombros","Bíceps","Tríceps","Abdômen","Lombar","Glúteos","Panturrilha","Cardio","Corpo Inteiro","Outro"].sort(),We=["Força","Resistência","Hipertrofia","Potência","Cardiovascular","Flexibilidade","Mobilidade","Funcional","Calistenia","Outro"].sort(),Dn=({exercicios:t,onFavoriteToggle:n,onFetch:r,isAdmin:i})=>e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(a=>{const o=a.isFavoritedByCurrentUser??!1,c=Tn(a.urlVideo),u=Cn(a.urlVideo),f=a.isCustom||i;return e.jsxs(xt,{className:"rounded-xl border bg-card text-card-foreground shadow-sm flex flex-col overflow-hidden transition-transform transform hover:-translate-y-1",children:[e.jsx("div",{className:"w-full h-40 bg-gray-200 dark:bg-gray-700 relative",children:c?e.jsx(qr,{id:c,title:a.nome}):u?e.jsx(Wr,{id:u,title:a.nome}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground text-sm",children:"Sem Vídeo"})}),e.jsxs(yt,{className:"p-4 flex-grow flex flex-col",children:[e.jsxs("div",{className:"flex gap-1 mb-2 flex-wrap",children:[a.grupoMuscular&&e.jsx(ut,{variant:"secondary",children:a.grupoMuscular}),a.categoria&&e.jsx(ut,{variant:"outline",children:a.categoria})]}),e.jsx("h2",{className:"font-semibold text-base truncate mb-1",title:a.nome,children:a.nome}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 flex-grow mb-2",title:a.descricao??"",children:a.descricao||"Nenhuma descrição."}),e.jsxs("div",{className:"flex gap-1 items-center justify-end mt-auto pt-2 border-t",children:[e.jsx(yr,{delayDuration:100,children:a.isCustom?e.jsxs(st,{children:[e.jsx(lt,{children:e.jsx(br,{className:"w-4 h-4 text-blue-500"})}),e.jsx(ct,{children:e.jsx("p",{children:"Exercício Personalizado"})})]}):e.jsxs(st,{children:[e.jsx(lt,{children:e.jsx(_r,{className:"w-4 h-4 text-purple-500"})}),e.jsx(ct,{children:e.jsx("p",{children:"Exercício do App"})})]})}),f&&e.jsxs(e.Fragment,{children:[" ",e.jsx(Ur,{exercicio:a,onUpdated:r,gruposMusculares:qe,categoriasExercicio:We})," ",e.jsx(zr,{exercicioId:a._id,onDeleted:r})," "]}),e.jsx(G,{variant:"ghost",size:"icon",onClick:()=>n(a._id,o),title:o?"Desfavoritar":"Favoritar",className:"h-7 w-7",children:e.jsx(Lr,{className:`w-4 h-4 ${o?"fill-yellow-400 text-yellow-500":"text-muted-foreground hover:text-yellow-500"}`})})]})]})]},a._id)})});function Hn(){const{user:t}=gr(),n=!!t&&t.role.toLowerCase()==="admin",r=Me(),{toast:i}=$e(),[a,o]=C.useState(n?"app":"todos"),[c,u]=C.useState({searchTerm:"",grupo:je,categoria:je}),{data:f,isLoading:S}=Ir({queryKey:["exercicios",a,c.grupo,c.categoria],queryFn:()=>{const b=new URLSearchParams({tipo:a,grupo:c.grupo,categoria:c.categoria});return it(`/api/exercicios/biblioteca?${b.toString()}`)},placeholderData:b=>b}),x=C.useMemo(()=>f?f.filter(b=>b.nome.toLowerCase().includes(c.searchTerm.toLowerCase())).sort((b,d)=>b.nome.localeCompare(d.nome,"pt-BR")):[],[f,c.searchTerm]),m=b=>{u(d=>({...d,...b}))},h=()=>{u({searchTerm:"",grupo:je,categoria:je})},$=Object.values(c).filter(b=>b!==""&&b!==je).length,M=async(b,d)=>{try{await it(`/api/exercicios/${b}/favorite`,{method:d?"DELETE":"POST"}),i({title:"Sucesso",description:`Exercício ${d?"desfavoritado":"favoritado"}.`}),r.invalidateQueries({queryKey:["exercicios"]})}catch(O){i({title:"Erro",description:O.message,variant:"destructive"})}},j=()=>{r.invalidateQueries({queryKey:["exercicios",a]})};return e.jsxs("div",{className:"container mx-auto p-4 md:p-6 lg:p-8 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Biblioteca de Exercícios"}),e.jsx("p",{className:"text-muted-foreground",children:"Encontre, crie e gerencie os exercícios para seus treinos."})]}),e.jsx("div",{className:"flex-shrink-0",children:n?e.jsx(dt,{onCreated:j,creationType:"app",triggerButtonText:"Criar Exercício do App"}):e.jsx(dt,{onCreated:j,creationType:"personal",triggerButtonText:"Criar Meu Exercício"})})]}),e.jsx(Sr,{defaultValue:n?"app":"todos",onValueChange:b=>o(b),className:"w-full",children:e.jsx("div",{className:"overflow-x-auto pb-2",children:e.jsxs(Tr,{className:"min-w-full sm:min-w-0 sm:grid sm:w-full sm:grid-cols-4",children:[!n&&e.jsx(Ne,{value:"todos",children:"Todos"}),e.jsx(Ne,{value:"app",children:"Exercícios do App"}),!n&&e.jsx(Ne,{value:"meus",children:"Meus Exercícios"}),e.jsx(Ne,{value:"favoritos",children:"Favoritos"})]})})}),e.jsxs(xt,{className:"hidden sm:block",children:[e.jsxs(vr,{children:[e.jsx(wr,{className:"text-lg",children:"Filtros"}),e.jsx(xr,{children:"Refine sua busca para encontrar exercícios específicos."})]}),e.jsx(yt,{children:e.jsx(vt,{grupos:qe,categorias:We,filters:c,onFilterChange:m,onClearFilters:h})})]}),e.jsx("div",{className:"sm:hidden",children:e.jsxs(Bt,{children:[e.jsx(jn,{asChild:!0,children:e.jsxs(G,{variant:"outline",className:"w-full justify-center relative",children:[e.jsx(Br,{className:"w-4 h-4 mr-2"}),"Filtros",$>0&&e.jsx("span",{className:"absolute top-0 right-0 -mt-1 -mr-1 h-4 w-4 rounded-full bg-primary text-primary-foreground text-xs flex items-center justify-center",children:$})]})}),e.jsxs(Ut,{children:[e.jsxs(zt,{children:[e.jsx(Wt,{children:"Filtrar Exercícios"}),e.jsx(Yt,{children:"Selecione os filtros para refinar os resultados."})]}),e.jsx("div",{className:"p-4",children:e.jsx(vt,{grupos:qe,categorias:We,filters:c,onFilterChange:m,onClearFilters:h})}),e.jsx(qt,{children:e.jsx(Sn,{asChild:!0,children:e.jsx(G,{children:"Ver Resultados"})})})]})]})}),S?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-6",children:[...Array(8)].map((b,d)=>e.jsx(Cr,{className:"h-72 w-full rounded-xl"},d))}):x.length===0?e.jsxs("div",{className:"text-center text-muted-foreground mt-6 py-16 border-2 border-dashed rounded-lg",children:[e.jsx(Vr,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-medium",children:"Nenhum exercício encontrado"}),e.jsx("p",{className:"mt-1 text-sm",children:"Tente ajustar seus filtros ou crie um novo exercício."})]}):e.jsx("div",{className:"mt-6",children:e.jsx(Dn,{exercicios:x,onFavoriteToggle:M,onFetch:j,isAdmin:n})})]})}export{Hn as default};
