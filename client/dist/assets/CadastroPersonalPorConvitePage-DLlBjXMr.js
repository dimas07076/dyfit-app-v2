import{c as D,t as M,s as I,o as R,r as j,m as f,j as e,n as g,C as v,a as N,b as y,e as w,d as T,S as B,B as b,Q as q,U as z,I as r,M as V}from"./index-BzLV8CNE.js";import{u as A}from"./useQuery-PwrN8lgt.js";import{u as K}from"./useMutation-CMAM4n7S.js";import{u as O,t as Q,o as U,s as o}from"./types-BCbViMJN.js";import{F as G,a as l,b as i,c as n,d as c,e as d}from"./form-Bay0436k.js";import{S as $}from"./shield-check-7MDnEDak.js";import{B as H}from"./bar-chart-Bj7A1Ztz.js";import"./label-ErXilaHi.js";/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=D("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),J=U({nome:o().min(3,{message:"O nome completo é obrigatório."}),email:o().email({message:"Por favor, insira um e-mail válido."}),password:o().min(6,{message:"A senha deve ter no mínimo 6 caracteres."}),confirmPassword:o()}).refine(m=>m.password===m.confirmPassword,{message:"As senhas não coincidem.",path:["confirmPassword"]}),re=()=>{const t=M().tokenDeConvite,[,S]=I(),{toast:u}=R(),[h,P]=j.useState(),[F,k]=j.useState(!1),a=O({resolver:Q(J),defaultValues:{nome:"",email:"",password:"",confirmPassword:""}}),x=A({queryKey:["validatePersonalInvite",t],queryFn:async()=>{const s=await f("GET",`/api/public/convites/validar/${t}`);return s.emailConvidado&&(P(s.emailConvidado),a.setValue("email",s.emailConvidado)),s},enabled:!!t,retry:!1}),p=K({mutationFn:s=>{const{confirmPassword:Z,...L}=s;return f("POST",`/api/public/convites/registrar/${t}`,L)},onSuccess:()=>{u({title:"Cadastro Realizado com Sucesso!",description:"Sua conta foi criada. Você já pode fazer o login."}),k(!0)},onError:s=>{u({variant:"destructive",title:"Erro no Cadastro",description:s.message||"Não foi possível completar o cadastro."})}}),E=s=>{p.mutate(s)};return x.isLoading?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-100 p-4",children:[e.jsx(g,{className:"h-12 w-12 animate-spin text-primary mb-4"}),e.jsx("p",{className:"text-lg text-slate-700",children:"Validando seu convite..."})]}):x.isError?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 p-4",children:e.jsxs(v,{className:"w-full max-w-md shadow-xl text-center",children:[e.jsx(N,{children:e.jsx(y,{className:"text-2xl text-destructive",children:"Convite Inválido"})}),e.jsxs(w,{children:[e.jsx("p",{className:"text-destructive-foreground bg-destructive/10 p-3 rounded-md",children:x.error.message||"O link é inválido, expirou ou já foi utilizado."}),e.jsx("p",{className:"mt-4 text-sm text-slate-600",children:"Por favor, solicite um novo link ao administrador da plataforma."})]})]})}):F?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-slate-100 p-4",children:e.jsxs(v,{className:"w-full max-w-md shadow-xl text-center",children:[e.jsxs(N,{children:[e.jsx(y,{className:"text-2xl text-green-600",children:"Cadastro Concluído!"}),e.jsx(T,{className:"text-base pt-2",children:"Sua jornada no DyFit começa agora!"})]}),e.jsx(w,{children:e.jsx("p",{className:"text-slate-700",children:"Sua conta foi criada com sucesso e está pronta para uso."})}),e.jsx(B,{children:e.jsx(b,{onClick:()=>S("/login"),className:"w-full",children:"Ir para a tela de Login"})})]})}):e.jsx("div",{className:"min-h-screen bg-slate-100 flex items-center justify-center p-4 lg:p-8",children:e.jsxs("div",{className:"w-full max-w-6xl mx-auto grid lg:grid-cols-2 gap-8 lg:gap-16 items-center bg-white shadow-2xl rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"hidden lg:flex flex-col justify-center p-12 bg-gradient-to-br from-gray-900 to-gray-800 h-full text-primary-foreground",children:[e.jsx("img",{src:"/logodyfit.png",alt:"Logo DyFit",className:"w-28 h-auto mb-8"}),e.jsx("h1",{className:"text-4xl font-bold leading-tight",children:"Dê um upgrade na sua carreira."}),e.jsx("p",{className:"mt-4 text-lg text-primary-foreground/90",children:"Junte-se a uma comunidade de personais que estão transformando a maneira de treinar."}),e.jsxs("ul",{className:"mt-8 space-y-4 text-base",children:[e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx($,{className:"h-6 w-6 text-green-300"}),e.jsx("span",{children:"Gestão completa e segura de alunos."})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(q,{className:"h-6 w-6 text-green-300"}),e.jsx("span",{children:"Crie e personalize treinos com facilidade."})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(H,{className:"h-6 w-6 text-green-300"}),e.jsx("span",{children:"Acompanhe o progresso com relatórios visuais."})]})]})]}),e.jsxs("div",{className:"p-8 lg:p-12",children:[e.jsx("div",{className:"lg:hidden text-center mb-8",children:e.jsx("img",{src:"/logodyfit.png",alt:"Logo DyFit",className:"w-20 h-auto mx-auto mb-4"})}),e.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"Bem-vindo(a) ao DyFit!"}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Parabéns por se juntar à mais completa ferramenta de gestão para Personal Trainers. Crie sua conta para começar."}),e.jsx(G,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(E),className:"mt-8 space-y-6",children:[e.jsx(l,{control:a.control,name:"nome",render:({field:s})=>e.jsxs(i,{children:[e.jsx(n,{children:"Nome Completo"}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),e.jsx(r,{placeholder:"Seu nome completo",...s,className:"pl-10"})]})}),e.jsx(d,{})]})}),e.jsx(l,{control:a.control,name:"email",render:({field:s})=>e.jsxs(i,{children:[e.jsx(n,{children:"Email"}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(V,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),e.jsx(r,{placeholder:"seu.email@exemplo.com",...s,disabled:!!h,className:"pl-10 disabled:opacity-70 disabled:cursor-not-allowed"})]})}),h&&e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Este e-mail foi pré-definido pelo convite."}),e.jsx(d,{})]})}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[e.jsx(l,{control:a.control,name:"password",render:({field:s})=>e.jsxs(i,{children:[e.jsx(n,{children:"Crie sua Senha"}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),e.jsx(r,{type:"password",placeholder:"Mín. 6 caracteres",...s,className:"pl-10"})]})}),e.jsx(d,{})]})}),e.jsx(l,{control:a.control,name:"confirmPassword",render:({field:s})=>e.jsxs(i,{children:[e.jsx(n,{children:"Confirme a Senha"}),e.jsx(c,{children:e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),e.jsx(r,{type:"password",placeholder:"Repita a senha",...s,className:"pl-10"})]})}),e.jsx(d,{})]})})]}),e.jsxs(b,{type:"submit",className:"w-full text-lg font-semibold py-6",disabled:p.isPending,children:[p.isPending&&e.jsx(g,{className:"mr-2 h-4 w-4 animate-spin"}),"Criar Minha Conta"]})]})})]})]})})};export{re as default};
