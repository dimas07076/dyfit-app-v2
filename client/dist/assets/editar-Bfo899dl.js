import{u as N,o as b,q as C,r as o,j as e,n as x,C as y,a as P,b as S,d as E,e as A,A as F,f as L,I as d,S as U,B as I,m as q}from"./index-BzLV8CNE.js";import{L as c}from"./label-ErXilaHi.js";import{u as w}from"./useMutation-CMAM4n7S.js";function B(){const{user:a,setUser:p,isLoading:f}=N(),{toast:i}=b();C();const[n,m]=o.useState(""),[l,u]=o.useState("");o.useEffect(()=>{a&&(m(a.firstName||""),u(a.lastName||""))},[a]);const r=w({mutationFn:s=>q("PATCH","/api/profile/me",s),onSuccess:s=>{p(s.user),i({title:"Sucesso",description:s.message||"Perfil atualizado."})},onError:s=>{i({variant:"destructive",title:"Erro ao Atualizar",description:s.message||"Não foi possível salvar as alterações."})}}),h=s=>{if(s.preventDefault(),!n.trim()||!l.trim()){i({variant:"destructive",title:"Erro",description:"Nome e Sobrenome são obrigatórios."});return}const t={firstName:n.trim(),lastName:l.trim()};r.mutate(t)},j=(s="",t="")=>{const g=(s==null?void 0:s[0])||"",v=(t==null?void 0:t[0])||"";return`${g}${v}`.toUpperCase()||"?"};return f?e.jsxs("div",{className:"flex justify-center items-center h-full pt-20",children:[" ",e.jsx(x,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"ml-2",children:"Carregando perfil..."})]}):a?e.jsx("div",{className:"container mx-auto max-w-3xl py-8 px-4",children:e.jsxs(y,{children:[e.jsxs(P,{children:[e.jsx(S,{children:"Editar Perfil"}),e.jsx(E,{children:"Atualize suas informações pessoais."})]}),e.jsxs("form",{onSubmit:h,children:[e.jsxs(A,{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(F,{className:"h-24 w-24 border-2 border-primary/20",children:e.jsx(L,{className:"text-3xl bg-primary/10 text-primary dark:bg-primary/20",children:j(a.firstName,a.lastName)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"(Upload de foto em breve)"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"firstName",children:"Nome"}),e.jsx(d,{id:"firstName",value:n,onChange:s=>m(s.target.value),required:!0,disabled:r.isPending})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"lastName",children:"Sobrenome"}),e.jsx(d,{id:"lastName",value:l,onChange:s=>u(s.target.value),required:!0,disabled:r.isPending})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"email",children:"Email"}),e.jsx(d,{id:"email",value:a.email,disabled:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"O email não pode ser alterado."})]})]}),e.jsx(U,{children:e.jsxs(I,{type:"submit",disabled:r.isPending,children:[r.isPending&&e.jsx(x,{className:"mr-2 h-4 w-4 animate-spin"}),"Salvar Alterações"]})})]})]})}):e.jsx("div",{className:"text-center py-10",children:"Usuário não encontrado. Por favor, faça login novamente."})}export{B as default};
