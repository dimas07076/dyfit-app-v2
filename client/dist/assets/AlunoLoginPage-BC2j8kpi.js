import{s as y,r as a,a9 as C,o as L,j as e,n as h,C as k,a as A,b as E,d as S,e as I,M as T,I as f,B as D,L as P,m as q}from"./index-BzLV8CNE.js";import{L as B}from"./lock-DHsjEbPn.js";import{A as M}from"./arrow-left-CY9mcJgZ.js";function R(){const[,i]=y(),b=a.useContext(C),{toast:d}=L(),[c,j]=a.useState(""),[m,N]=a.useState(""),[r,u]=a.useState(!1),[g,l]=a.useState(""),{loginAluno:o,aluno:x,isLoadingAluno:n}=b||{};a.useEffect(()=>{!n&&x&&i("/aluno/dashboard",{replace:!0})},[x,n,i]);const v=async s=>{s.preventDefault(),l(""),u(!0);try{const t=await q("POST","/api/auth/aluno/login",{email:c.toLowerCase().trim(),password:m});o==null||o(t.token),d({title:"Login bem-sucedido!",description:`Bem-vindo(a) de volta, ${t.aluno.nome||"Aluno"}!`})}catch(t){const p=t.message||"Credenciais inválidas ou erro no servidor.",w=t.code;l(w==="ACCOUNT_INACTIVE"?"Sua conta está inativa. Por favor, entre em contato com seu personal trainer para reativá-la.":p),d({title:"Erro no Login",description:p,variant:"destructive"})}finally{u(!1)}};return n?e.jsxs("div",{className:"flex h-screen w-full items-center justify-center",children:[e.jsx(h,{className:"h-10 w-10 animate-spin text-primary"})," ",e.jsx("span",{className:"ml-2",children:"Verificando sessão..."})]}):e.jsxs("div",{className:"min-h-screen w-full lg:grid lg:grid-cols-2",children:[e.jsx("div",{className:`flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 
                           bg-gradient-to-br from-sky-500 to-blue-700 lg:bg-none`,children:e.jsxs("div",{className:"w-full max-w-sm space-y-8",children:[e.jsx("div",{className:"lg:hidden text-center",children:e.jsx("img",{src:"/images/logo-branco.png",alt:"Logo DyFit",className:"h-24 mx-auto"})}),e.jsxs(k,{className:"w-full animate-in fade-in-50 slide-in-from-bottom-10 duration-500 lg:border-none lg:shadow-none lg:bg-transparent",children:[e.jsxs(A,{className:"text-center",children:[e.jsx("img",{src:"/logodyfit.png",alt:"Logo DyFit",className:"h-14 mx-auto hidden lg:block"}),e.jsx(E,{className:"text-3xl font-bold lg:text-gray-900 lg:dark:text-white",children:"Entrar como Aluno"}),e.jsx(S,{className:"lg:text-gray-600 lg:dark:text-gray-400",children:"Acesse seus treinos e seu progresso."})]}),e.jsxs(I,{children:[e.jsxs("form",{onSubmit:v,className:"grid gap-4",children:[g&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-2 mb-2 p-2 bg-red-50 dark:bg-red-900/30 rounded-md",children:g}),e.jsxs("div",{className:"grid gap-2 relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx(f,{id:"email-aluno",type:"email",placeholder:"seu.email@exemplo.com",required:!0,value:c,onChange:s=>j(s.target.value),disabled:r,autoComplete:"email",className:"pl-10 h-12 text-base bg-white/80 dark:bg-slate-800/80 lg:bg-background"})]}),e.jsxs("div",{className:"grid gap-2 relative",children:[e.jsx(B,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx(f,{id:"password-aluno",type:"password",placeholder:"Sua senha",required:!0,value:m,onChange:s=>N(s.target.value),disabled:r,autoComplete:"current-password",className:"pl-10 h-12 text-base bg-white/80 dark:bg-slate-800/80 lg:bg-background"})]}),e.jsxs(D,{type:"submit",className:"w-full h-12 text-base font-semibold mt-2",disabled:r,children:[r&&e.jsx(h,{className:"mr-2 h-4 w-4 animate-spin"}),"Entrar"]})]}),e.jsx("div",{className:"mt-6 text-center text-sm",children:e.jsxs(P,{href:"/login",className:"inline-flex items-center text-muted-foreground hover:text-primary transition-colors",children:[e.jsx(M,{className:"mr-1 h-4 w-4"}),"Voltar para seleção de perfil"]})})]})]})]})}),e.jsx("div",{className:"hidden bg-muted lg:block",children:e.jsx("img",{src:"/images/login-aluno.png",alt:"Imagem de um aluno treinando",className:"h-full w-full object-cover dark:brightness-[0.8]"})})]})}export{R as default};
