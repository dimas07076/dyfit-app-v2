import{t as c,s as p,q as x,o as g,l as u,j as a,L as f,C as h,a as y,b as j,d as C,e as E}from"./index-BzLV8CNE.js";import{u as L}from"./useQuery-PwrN8lgt.js";import{u as v}from"./useMutation-CMAM4n7S.js";import{S}from"./student-form-B8tNw20-.js";import{E as q}from"./ErrorMessage-CKvNOnls.js";import{L as N}from"./LoadingSpinner-CMtr6_ld.js";import{C as b}from"./chevron-left-B1YWD8N6.js";import"./types-BCbViMJN.js";import"./form-Bay0436k.js";import"./label-ErXilaHi.js";import"./textarea-Bgva5FCm.js";import"./select-WeAdnBMh.js";import"./triangle-alert-BMd-Rj3a.js";const J=()=>{const s=c().id,[,m]=p(),o=x(),{toast:i}=g(),{data:r,isLoading:d,isError:l,error:t}=L({queryKey:["aluno",s],queryFn:()=>u(`/api/aluno/gerenciar/${s}`),enabled:!!s}),n=v({mutationFn:e=>u(`/api/aluno/gerenciar/${s}`,{method:"PUT",body:JSON.stringify(e)}),onSuccess:e=>{i({title:"Sucesso!",description:`${e.nome} atualizado com sucesso.`}),o.invalidateQueries({queryKey:["/api/aluno/gerenciar"]}),o.invalidateQueries({queryKey:["aluno",s]}),m("/alunos")},onError:e=>{i({variant:"destructive",title:"Erro ao atualizar",description:e.message})}});return d?a.jsx(N,{text:"Carregando dados do aluno..."}):l?a.jsx(q,{title:"Erro ao carregar",message:(t==null?void 0:t.message)||"Não foi possível encontrar o aluno."}):a.jsxs("div",{className:"p-4 md:p-6 lg:p-8",children:[a.jsxs(f,{href:"/alunos",className:"inline-flex items-center mb-4 text-sm text-primary hover:text-primary/90",children:[a.jsx(b,{className:"w-4 h-4 mr-1"})," Voltar para Alunos"]}),a.jsxs(h,{className:"max-w-3xl mx-auto",children:[a.jsxs(y,{children:[a.jsx(j,{children:"Editar Aluno"}),a.jsxs(C,{children:["Atualize os dados de ",r==null?void 0:r.nome,"."]})]}),a.jsx(E,{children:a.jsx(S,{initialData:r,isEditing:!0,onSubmit:e=>n.mutate(e),isLoading:n.isPending})})]})]})};export{J as default};
