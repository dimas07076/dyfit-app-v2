import{c as d,j as e,C as f,D as I,r as y,a as C,b as A,d as q,L as x,B as c,I as V,e as L,A as U,f as B,g as F,h as $,i as P,k as v,l as z,u as R,m as H}from"./index-BzLV8CNE.js";import{u as M}from"./useQuery-PwrN8lgt.js";import{C as O,S as G}from"./RotinaFormModal-Ov1nMD2j.js";import{S as w}from"./skeleton-DvEZY-df.js";import{E}from"./ErrorMessage-CKvNOnls.js";import{A as Q,E as _}from"./AlunoViewModal-CisxOwlQ.js";import{U as K}from"./user-plus-leUCsTw7.js";import{E as Z}from"./eye-DbA9ViTj.js";import{P as W}from"./pencil-DF3fT-z6.js";import{L as J}from"./LoadingSpinner-CMtr6_ld.js";import{T as X,a as Y,b as N,c as b,P as h}from"./tabs-Dt_cpVbU.js";import{Z as ee}from"./zap-CMjEOO_s.js";import"./dialog-Cc9arakq.js";import"./table-C_2_dIR3.js";import"./badge-mwLuO-R-.js";import"./info-CBDjHlMF.js";import"./clock-Ds75S8Ae.js";import"./circle-play-CwwuRuoJ.js";import"./square-pen-DXG1TAJA.js";import"./useMutation-CMAM4n7S.js";import"./label-ErXilaHi.js";import"./select-WeAdnBMh.js";import"./textarea-Bgva5FCm.js";import"./trash-2-CwwKKaCS.js";import"./triangle-alert-BMd-Rj3a.js";import"./arrow-left-CY9mcJgZ.js";import"./progress-37Updk6C.js";import"./VideoPlayerModal-DmKj2Fh1.js";import"./bar-chart-Bj7A1Ztz.js";import"./circle-check-DMXSzY4S.js";import"./weight-DLv2WyAW.js";import"./calendar-days-Degg0IRE.js";/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=d("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=d("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=d("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=d("CalendarCheck",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=d("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.390.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=d("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]]);function p({title:s,value:i,change:t,icon:r,isLoading:a=!1}){const n=()=>{switch(r){case"students":return e.jsx(k,{className:"w-6 h-6"});case"workouts":return e.jsx(I,{className:"w-6 h-6"});case"sessions":return e.jsx(te,{className:"w-6 h-6"});case"completion":return e.jsx(O,{className:"w-6 h-6"});case"activity":return e.jsx(se,{className:"w-6 h-6"});default:return e.jsx(k,{className:"w-6 h-6"})}},o=()=>{switch(r){case"students":return"bg-primary/10 text-primary";case"workouts":return"bg-secondary/10 text-secondary";case"sessions":return"bg-accent/10 text-accent";case"completion":return"bg-success/10 text-success";case"activity":return"bg-orange-100 text-orange-500";default:return"bg-primary/10 text-primary"}},u=()=>t?t.trend==="up"?"text-success":t.trend==="down"?"text-error":"text-gray-500":"",m=()=>t?t.trend==="up"?e.jsx(re,{className:"w-3 h-3 mr-1"}):t.trend==="down"?e.jsx(ae,{className:"w-3 h-3 mr-1"}):null:null;return e.jsx(f,{className:"p-5 border-0 shadow-md bg-white",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500 text-sm",children:s}),a?e.jsx("div",{className:"h-8 w-16 bg-gray-200 animate-pulse rounded mt-1"}):e.jsx("h3",{className:"text-2xl font-bold mt-1",children:i}),t&&e.jsxs("p",{className:`text-xs ${u()} mt-1 flex items-center`,children:[m(),t.value]})]}),e.jsx("div",{className:`h-12 w-12 rounded-full flex items-center justify-center ${o()}`,children:n()})]})})}const le=({student:s,onView:i})=>{const t=r=>{const a=r.split(" ").filter(Boolean);return a.length>1?`${a[0][0]}${a[a.length-1][0]}`.toUpperCase():a[0]?a[0].substring(0,2).toUpperCase():"?"};return e.jsxs("div",{className:"flex items-center justify-between p-4 border-b last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(U,{children:e.jsx(B,{children:t(s.nome)})}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-sm text-gray-800",children:s.nome}),e.jsx("p",{className:"text-xs text-gray-500",children:s.email||"Email n√£o dispon√≠vel"})]})]}),e.jsxs(F,{children:[e.jsx($,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"icon",children:e.jsx(_,{className:"h-4 w-4"})})}),e.jsxs(P,{align:"end",children:[e.jsxs(v,{onClick:()=>i(s),children:[e.jsx(Z,{className:"mr-2 h-4 w-4"})," Visualizar"]}),e.jsx(v,{asChild:!0,children:e.jsxs(x,{href:`/alunos/editar/${s._id}`,children:[e.jsx(W,{className:"mr-2 h-4 w-4"})," Editar Aluno"]})})]})]})]})};function ne({trainerId:s}){const[i,t]=y.useState(""),[r,a]=y.useState(null),[n,o]=y.useState(!1),{data:u=[],isLoading:m,isError:j,error:S}=M({queryKey:["alunosAtivos",s],queryFn:()=>z(`/api/aluno/gerenciar?status=active&trainerId=${s}`),retry:1,enabled:!!s}),g=u.filter(l=>l.nome.toLowerCase().includes(i.toLowerCase())),T=l=>{a(l),o(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(f,{className:"bg-white dark:bg-slate-800 shadow-md",children:[e.jsxs(C,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[e.jsxs("div",{children:[e.jsx(A,{children:"Alunos Ativos"}),e.jsx(q,{children:"Seus alunos com planos de treino em andamento."})]}),e.jsx(x,{href:"/alunos/novo",children:e.jsxs(c,{size:"sm",children:[e.jsx(K,{className:"h-4 w-4 mr-2"})," Adicionar Aluno"]})})]}),e.jsxs("div",{className:"relative mt-4",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(V,{type:"search",placeholder:"Buscar aluno ativo...",className:"pl-9 w-full",value:i,onChange:l=>t(l.target.value)})]})]}),e.jsxs(L,{className:"p-0",children:[m&&e.jsx("div",{className:"p-4 space-y-3",children:[...Array(3)].map((l,D)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(w,{className:"h-10 w-10 rounded-full"}),e.jsxs("div",{className:"flex-grow space-y-2",children:[e.jsx(w,{className:"h-4 w-3/5"}),e.jsx(w,{className:"h-3 w-2/5"})]})]},D))}),j&&e.jsx("div",{className:"p-4",children:e.jsx(E,{title:"Erro ao carregar alunos",message:S.message})}),!m&&!j&&g.length>0&&e.jsx("div",{className:"divide-y",children:g.map(l=>e.jsx(le,{student:l,onView:T},l._id))}),!m&&!j&&g.length===0&&e.jsx("p",{className:"text-center text-sm text-gray-500 py-8",children:u.length>0?"Nenhum aluno encontrado com essa busca.":"Nenhum aluno ativo encontrado."})]})]}),e.jsx(Q,{aluno:r,open:n,onOpenChange:o})]})}function Pe(){const{user:s}=R(),i=s==null?void 0:s.id,t=(s==null?void 0:s.firstName)||(s==null?void 0:s.username)||"Personal",{data:r,isLoading:a,error:n}=M({queryKey:["dashboardGeral",i],queryFn:async()=>{if(!i)throw new Error("Trainer ID n√£o encontrado para buscar estat√≠sticas.");return H("GET",`/api/dashboard/geral?trainerId=${i}`)},enabled:!!i}),o=a?"Carregando um resumo do seu dia...":"Aqui est√° um resumo da sua atividade hoje.";return s?e.jsxs("div",{className:"flex flex-col h-full overflow-y-auto p-4 md:p-6 lg:p-8 bg-blue-50 dark:bg-slate-900",children:[e.jsx("header",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 mb-6",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100",children:["Bem-vindo(a) de volta, ",t,"! üëã"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-1",children:o})]})}),n&&e.jsx(E,{title:"Erro ao Carregar Estat√≠sticas",message:n.message}),e.jsxs(X,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(Y,{className:"grid w-full grid-cols-2",children:[e.jsxs(N,{value:"overview",children:[e.jsx(ie,{className:"w-4 h-4 mr-2 sm:hidden"})," Vis√£o Geral"]}),e.jsxs(N,{value:"actions",children:[e.jsx(ee,{className:"w-4 h-4 mr-2 sm:hidden"})," A√ß√µes R√°pidas"]})]}),e.jsxs(b,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(p,{title:"Total de Alunos",value:a?"...":((r==null?void 0:r.totalAlunos)??0).toString(),icon:"students",isLoading:a}),e.jsx(p,{title:"Alunos Ativos",value:a?"...":((r==null?void 0:r.treinosAtivos)??0).toString(),icon:"activity",isLoading:a}),e.jsx(p,{title:"Fichas Modelo",value:a?"...":((r==null?void 0:r.totalTreinosModelo)??0).toString(),icon:"workouts",isLoading:a}),e.jsx(p,{title:"Feedbacks Hoje",value:a?"...":((r==null?void 0:r.feedbacksHojeCount)??0).toString(),icon:"sessions",isLoading:a})]}),e.jsx("div",{children:e.jsx(ne,{trainerId:i})})]}),e.jsx(b,{value:"actions",children:e.jsxs(f,{className:"bg-white dark:bg-slate-800",children:[e.jsx(C,{children:e.jsx(A,{children:"O que voc√™ gostaria de fazer agora?"})}),e.jsxs(L,{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(x,{href:"/alunos/novo",children:e.jsxs(c,{variant:"outline",className:"w-full py-6 text-base bg-white dark:bg-slate-800",children:[e.jsx(h,{className:"mr-2 w-4 h-4"})," Adicionar Aluno"]})}),e.jsx(x,{href:"/treinos",children:e.jsxs(c,{variant:"outline",className:"w-full py-6 text-base bg-white dark:bg-slate-800",children:[e.jsx(h,{className:"mr-2 w-4 h-4"})," Criar Ficha Modelo"]})}),e.jsx(x,{href:"/exercises",children:e.jsxs(c,{variant:"outline",className:"w-full py-6 text-base bg-white dark:bg-slate-800",children:[e.jsx(h,{className:"mr-2 w-4 h-4"})," Novo Exerc√≠cio"]})}),e.jsxs(c,{variant:"outline",className:"w-full py-6 text-base bg-white dark:bg-slate-800",disabled:!0,children:[e.jsx(h,{className:"mr-2 w-4 h-4"})," Nova Avalia√ß√£o"]})]})]})})]})]}):e.jsx("div",{className:"bg-blue-50 dark:bg-slate-900 h-full",children:e.jsx(J,{text:"Carregando dados do usu√°rio..."})})}export{Pe as default};
