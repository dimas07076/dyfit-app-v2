import{o as j,q as f,s as g,j as e,C as N,a as v,b as C,d as y,e as b,I as t,S,B as P,n as w,m as T}from"./index-BzLV8CNE.js";import{u as E,C as F,t as U,o as A,e as L,s as n}from"./types-BCbViMJN.js";import{u as q}from"./useMutation-CMAM4n7S.js";import{L as i}from"./label-ErXilaHi.js";import{S as I,a as V,b as M,c as O,d}from"./select-WeAdnBMh.js";import{U as R}from"./user-plus-leUCsTw7.js";const $=A({nome:n().min(3,{message:"O nome completo é obrigatório (mínimo 3 caracteres)."}),email:n().email({message:"Por favor, insira um e-mail válido."}),password:n().min(6,{message:"A senha deve ter pelo menos 6 caracteres."}),role:L(["Personal Trainer","Admin"],{required_error:"A função é obrigatória."})});function _(){const{toast:l}=j(),u=f(),[,x]=g(),{control:r,handleSubmit:p,formState:{errors:a}}=E({resolver:U($),defaultValues:{nome:"",email:"",password:"",role:"Personal Trainer"}}),o=q({mutationFn:s=>T("POST","/api/admin/personal-trainers",s),onSuccess:s=>{l({title:"Sucesso!",description:`Usuário "${s.nome}" (${s.email}) criado com a função de ${s.role}.`}),u.invalidateQueries({queryKey:["adminPersonalTrainersList"]}),x("/admin/gerenciar-personais")},onError:s=>{var m,c;console.error("Erro ao criar Personal Trainer:",s),l({variant:"destructive",title:"Erro ao Criar Usuário",description:((c=(m=s.response)==null?void 0:m.data)==null?void 0:c.mensagem)||s.message||"Ocorreu um problema ao tentar criar o usuário."})}}),h=s=>{o.mutate(s)};return e.jsx("div",{className:"container mx-auto py-10 px-4 flex flex-col items-center",children:e.jsxs(N,{className:"w-full max-w-2xl shadow-xl",children:[e.jsxs(v,{className:"text-center",children:[e.jsx("div",{className:"flex justify-center items-center mb-3",children:e.jsx(R,{className:"h-10 w-10 text-primary"})}),e.jsx(C,{className:"text-3xl font-bold",children:"Criar Novo Usuário"}),e.jsx(y,{className:"text-md text-muted-foreground",children:"Preencha os dados abaixo para adicionar um novo Personal Trainer ou Administrador ao sistema."})]}),e.jsx(b,{children:e.jsxs("form",{onSubmit:p(h),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"nome",className:"font-semibold",children:"Nome Completo"}),e.jsx(t,{id:"nome",placeholder:"Ex: João da Silva Pereira",...r.register("nome")}),a.nome&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:a.nome.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"email",className:"font-semibold",children:"Endereço de E-mail"}),e.jsx(t,{id:"email",type:"email",placeholder:"Ex: joao.silva@example.com",...r.register("email")}),a.email&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:a.email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"password",children:"Senha Inicial"}),e.jsx(t,{id:"password",type:"password",placeholder:"Mínimo 6 caracteres",...r.register("password")}),a.password&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:a.password.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(i,{htmlFor:"role",className:"font-semibold",children:"Função (Role)"}),e.jsx(F,{name:"role",control:r,render:({field:s})=>e.jsxs(I,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(V,{id:"role",className:"w-full",children:e.jsx(M,{placeholder:"Selecione uma função"})}),e.jsxs(O,{children:[e.jsx(d,{value:"Personal Trainer",children:"Personal Trainer"}),e.jsx(d,{value:"Admin",children:"Administrador"})]})]})}),a.role&&e.jsx("p",{className:"text-sm font-medium text-destructive",children:a.role.message})]}),e.jsx(S,{className:"px-0 pt-8",children:e.jsxs(P,{type:"submit",className:"w-full text-lg py-6",disabled:o.isPending,children:[o.isPending&&e.jsx(w,{className:"mr-2 h-5 w-5 animate-spin"}),o.isPending?"Criando Usuário...":"Criar Usuário"]})})]})})]})})}export{_ as default};
