import{s as f,r as t,a7 as j,o as N,j as e,C as y,a as w,b as v,d as L,e as k,M as C,I as u,B as S,n as E,L as I,l as D}from"./index-BzLV8CNE.js";import{L as P}from"./lock-DHsjEbPn.js";import{A as T}from"./arrow-left-CY9mcJgZ.js";function U(){const[,x]=f(),l=t.useContext(j),{toast:i}=N(),[n,h]=t.useState(""),[d,p]=t.useState(""),[r,c]=t.useState(!1),[m,g]=t.useState(""),b=async a=>{a.preventDefault(),g(""),c(!0);try{const s=await D("/api/auth/login",{method:"POST",body:JSON.stringify({email:n.toLowerCase(),password:d})});localStorage.setItem("authToken",s.token);const o={...s.user,role:s.user.role||"Personal Trainer"};localStorage.setItem("userData",JSON.stringify(o)),l==null||l.setUser(o),i({title:"Login bem-sucedido!",description:`Bem-vindo(a) de volta, ${o.firstName}!`}),x("/")}catch(s){g(s.message||"Ocorreu um erro inesperado."),i({title:"Erro no Login",description:s.message,variant:"destructive"})}finally{c(!1)}};return e.jsxs("div",{className:"min-h-screen w-full lg:grid lg:grid-cols-2",children:[e.jsx("div",{className:`flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 
                           bg-gradient-to-br from-blue-500 to-indigo-600 lg:bg-none`,children:e.jsxs("div",{className:"w-full max-w-sm space-y-8",children:[e.jsx("div",{className:"lg:hidden text-center",children:e.jsx("img",{src:"/images/logo-branco.png",alt:"Logo DyFit",className:"h-24 mx-auto"})}),e.jsxs(y,{className:"w-full animate-in fade-in-50 slide-in-from-bottom-10 duration-500 lg:border-none lg:shadow-none lg:bg-transparent",children:[e.jsxs(w,{className:"text-center",children:[e.jsx("img",{src:"/logodyfit.png",alt:"Logo DyFit",className:"h-14 mx-auto hidden lg:block"}),e.jsx(v,{className:"text-3xl font-bold lg:text-gray-900 lg:dark:text-white",children:"Entrar como Personal"}),e.jsx(L,{className:"lg:text-gray-600 lg:dark:text-gray-400",children:"Gerencie seus alunos e rotinas."})]}),e.jsxs(k,{children:[e.jsxs("form",{onSubmit:b,className:"grid gap-4",children:[m&&e.jsx("p",{className:"text-red-500 text-sm text-center -mt-2 mb-2 p-2 bg-red-50 dark:bg-red-900/30 rounded-md",children:m}),e.jsxs("div",{className:"grid gap-2 relative",children:[e.jsx(C,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx(u,{id:"email-login",type:"email",placeholder:"seu.email@exemplo.com",required:!0,value:n,onChange:a=>h(a.target.value),disabled:r,autoComplete:"email",className:"pl-10 h-12 text-base bg-white/80 dark:bg-slate-800/80 lg:bg-background"})]}),e.jsxs("div",{className:"grid gap-2 relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx(u,{id:"password-login",type:"password",placeholder:"Sua senha",required:!0,value:d,onChange:a=>p(a.target.value),disabled:r,autoComplete:"current-password",className:"pl-10 h-12 text-base bg-white/80 dark:bg-slate-800/80 lg:bg-background"})]}),e.jsxs(S,{type:"submit",className:"w-full h-12 text-base font-semibold mt-2",disabled:r,children:[r&&e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),"Entrar"]})]}),e.jsx("div",{className:"mt-6 text-center text-sm",children:e.jsxs(I,{href:"/login",className:"inline-flex items-center text-muted-foreground hover:text-primary transition-colors",children:[e.jsx(T,{className:"mr-1 h-4 w-4"}),"Voltar para seleção de perfil"]})})]})]})]})}),e.jsx("div",{className:"hidden bg-muted lg:block",children:e.jsx("img",{src:"/images/login-personal.png",alt:"Imagem de um personal trainer",className:"h-full w-full object-cover dark:brightness-[0.7]"})})]})}export{U as default};
